/*
Rewrites:
#!name=Surge æ’ä»¶åˆé›†
#!desc=æœé›†äº†ç½‘ä¸Š Surge çš„æ’ä»¶ï¼Œå»ºè®®å…ˆæŸ¥çœ‹ä½¿ç”¨æ–¹æ³•å’Œæ³¨æ„äº‹é¡¹ã€‚æœ€åæ›´æ–°ï¼š23.10.09ã€‚æ‰€æœ‰èµ„æºå‡æœé›†äºç½‘ç»œï¼Œæ¬¢è¿ç•™è¨€æ·»åŠ ã€ä¿®æ”¹å’Œçº é”™ğŸ‘
#!openUrl=https://github.com/MingdeCZ/OutSide-Reborn/blob/main//Surge/Rewrites/Petite.sgmodule
#!author=@MingdeCZ https://github.com/MingdeCZ
#!homepage=https://github.com/MingdeCZ/OutSide-Reborn/tree/main/Surge
#!system=ios

[General]
# @VirgilClyne
# ğŸŸ æ•´ç‚¹è–¯æ¡:ğŸŒ é€šç”¨è®¾ç½®å¢å¼ºï¼ˆ(ğŸ“± iOS ç‰ˆ) 1.æ·»åŠ è·³è¿‡ä»£ç†éƒ¨åˆ†æ®µå†…å®¹ 2.æ·»åŠ è¿”å›çœŸå® IP æ®µå†…å®¹ 3.æ·»åŠ ä¸å¯ MitM çš„åŸŸåï¼Œé˜²æ­¢æ‰“æ–­è¿æ¥ï¼‰
# è·³è¿‡æŸä¸ªåŸŸåæˆ–è€… IP æ®µï¼Œè¿™äº›ç›®æ ‡ä¸»æœºå°†ä¸ä¼šç”± Surge Proxy å¤„ç†
# (macOS ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœå¯ç”¨äº† Set as System Proxy, è¿™äº›å€¼ä¼šè¢«å†™å…¥åˆ°ç³»ç»Ÿç½‘ç»œä»£ç†è®¾ç½®.)
skip-proxy = %INSERT% localhost, *.local, captive.apple.com, e.crashlytics.com, www.baidu.com, passenger.t3go.cn, yunbusiness.ccb.com, wxh.wo.cn, gate.lagou.com, www.abchina.com.cn, login-service.mobile-bank.psbc.com, mobile-bank.psbc.com, 10.0.0.0/8, 127.0.0.1/32, 172.16.0.0/12, 192.168.0.0/16, 192.168.122.1/32, 193.168.0.1/32, ::1/128, fe80::/10
# Always Real IP Hosts
# å½“ Surge VIF å¤„ç† DNS é—®é¢˜æ—¶ï¼Œæ­¤é€‰é¡¹è¦æ±‚ Surge è¿”å›ä¸€ä¸ªçœŸæ­£çš„ IP åœ°å€ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡ IP åœ°å€
# DNS æ•°æ®åŒ…å°†è¢«è½¬å‘åˆ°ä¸Šæ¸¸ DNS æœåŠ¡å™¨ã€‚
always-real-ip = %INSERT% *.lan, *.direct, cable.auth.com, *.msftconnecttest.com, *.msftncsi.com, network-test.debian.org, detectportal.firefox.com, resolver1.opendns.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, stun.*, global.turn.twilio.com, global.stun.twilio.com, app.yinxiang.com, injections.adguard.org, local.adguard.org, cable.auth.com, localhost.*.qq.com, localhost.*.weixin.qq.com, *.logon.battlenet.com.cn, *.logon.battle.net, *.blzstatic.cn, music.163.com, *.music.163.com, *.126.net, musicapi.taihe.com, music.taihe.com, songsearch.kugou.com, trackercdn.kugou.com, *.kuwo.cn, api-jooxtt.sanook.com, api.joox.com, joox.com, y.qq.com, *.y.qq.com, streamoc.music.tc.qq.com, mobileoc.music.tc.qq.com, isure.stream.qqmusic.qq.com, dl.stream.qqmusic.qq.com, aqqmusic.tc.qq.com, amobile.music.tc.qq.com, *.xiami.com, *.music.migu.cn, music.migu.cn, proxy.golang.org, *.mcdn.bilivideo.cn, *.cmpassport.com, id6.me, open.e.189.cn, mdn.open.wo.cn, opencloud.wostore.cn, auth.wosms.cn, *.jegotrip.com.cn, *.icitymobile.mobi, *.pingan.com.cn, *.cmbchina.com, pool.ntp.org, *.pool.ntp.org, ntp.*.com, time.*.com, ntp?.*.com, time?.*.com, time.*.gov, time.*.edu.cn, *.ntp.org.cn, PDC._msDCS.*.*, DC._msDCS.*.*, GC._msDCS.*.*

# TestFlight è´¦æˆ·ç®¡ç†
skip-proxy = %APPEND% iosapps.itunes.apple.com

# ğŸŸ æ•´ç‚¹è–¯æ¡:ğŸŒ DNS å¢å¼º
# ---(DNS æœåŠ¡å™¨)---
# é€šè¿‡ä»£ç†è¯·æ±‚ä½¿ç”¨æœ¬åœ° DNS æ˜ å°„ç»“æœ
use-local-host-item-for-proxy=true
# åŠ å¯† DNS æœåŠ¡å™¨
# ä½¿åŠ å¯† DNS è¯·æ±‚é€šè¿‡ä»£ç†ç­–ç•¥æ‰§è¡Œ
encrypted-dns-follow-outbound-mode = true

force-http-engine-hosts = %APPEND% boxjs.com, boxjs.net, *.boxjs.com, *.boxjs.net, script.hub, *.script.hub

[Host]
# ğŸŸ æ•´ç‚¹è–¯æ¡:ğŸŒ DNS å¢å¼ºï¼ˆ1.åŸŸåæŒ‰æ‰€å± DNS è¿›è¡Œåˆ†æµè§£æ 2.è·¯ç”±å™¨åœ°å€ä½¿ç”¨ç³»ç»Ÿ DNS è¿›è¡Œè§£æ 3.ç‰¹æ®Šåœ°å€ä½¿ç”¨è§„èŒƒ DNS è¿›è¡Œè§£æï¼‰
# --- CUSTOM HOSTS ---
# IPv6
ip6-localhost = ::1 // IPv6 Localhost
ip6-loopback = ::1 // IPv6 Loopback
ip6-localnet = fe00::0 // IPv6 Link-Local
ip6-mcastprefix = ff00::0 // IPv6 Multicast
ip6-allnodes = ff02::1 // IPv6 All Nodes
ip6-allrouters = ff02::2 // IPv6 All Routers
ip6-allhosts = ff02::3 // IPv6 All Hosts

# Encrypted DNS
dns.google = 8.8.8.8, 8.8.4.4, 2001:4860:4860::8888, 2001:4860:4860::8844 // https://dns.google/dns-query
dns64.dns.google = 2001:4860:4860::6464, 2001:4860:4860::64 // https://dns64.dns.google/dns-query
cloudflare-dns.com = 104.16.249.249, 104.16.248.249, 2606:4700::6810:f8f9, 2606:4700::6810:f9f9 // https://cloudflare-dns.com/dns-query
1dot1dot1dot1.cloudflare-dns.com = 1.1.1.1, 1.0.0.1, 2606:4700:4700::1001, 2606:4700:4700::1111 // 1dot1dot1dot1.cloudflare-dns.com:853
one.one.one.one = 1.1.1.1, 1.0.0.1, 2606:4700:4700::1001, 2606:4700:4700::1111  // one.one.one.one:853
dns.alidns.com = 223.5.5.5, 223.6.6.6, 2400:3200:baba::1, 2400:3200::1 // https://dns.alidns.com/dns-query
doh.pub = 1.12.12.12, 120.53.53.53 // https://doh.pub/dns-query
dot.pub = 1.12.12.12, 120.53.53.53 // dot.pub:853
doh.360.cn = 23.6.48.18, 112.65.69.15 // https://doh.360.cn/dns-query
dot.360.cn = 101.198.198.198, 101.198.199.200, 101.198.192.33, 112.65.69.15 // dot.360.cn:853
dns.twnic.tw = 101.101.101.101, 2001:de4::101, 2001:de4::102 // https://dns.twnic.tw/dns-query
ordns.he.net = 74.82.42.42, 2001:470:20::2 // https://ordns.he.net/dns-query

# Modify Contents
# services.googleapis.cn = 74.125.193.94 // Google API Services China
talk.google.com = 108.177.125.188 // Firebase Cloud Messaging
mtalk.google.com = 108.177.125.188, 2404:6800:4008:c07::bc, 142.250.31.188 // Firebase Cloud Messaging
alt1-mtalk.google.com = 3.3.3.3, 2607:f8b0:4023:c0b::bc, 64.233.171.188 // Firebase Cloud Messaging
alt2-mtalk.google.com = 3.3.3.3, 142.250.115.188 // Firebase Cloud Messaging
alt3-mtalk.google.com = 74.125.200.188, 173.194.77.188 // Firebase Cloud Messaging
alt4-mtalk.google.com = 74.125.200.188, 173.194.219.188 // Firebase Cloud Messaging
alt5-mtalk.google.com = 3.3.3.3, 2607:f8b0:4023:1::bc, 142.250.112.188 // Firebase Cloud Messaging
alt6-mtalk.google.com = 3.3.3.3, 172.217.197.188 // Firebase Cloud Messaging
alt7-mtalk.google.com = 74.125.200.188, 2607:f8b0:4002:c03::bc, 108.177.12.188 // Firebase Cloud Messaging
alt8-mtalk.google.com = 3.3.3.3 // Firebase Cloud Messaging
# dl.google.com = 180.163.151.161 // Google CDN
# dl.l.google.com = 180.163.151.161 // Google CDN

# --- CUSTOM DNS ---
# Modify Contents
blog.google = server:119.29.29.29 // Google Blog
googletraveladservices.com = server:119.29.29.29 // Google Flights
dl.google.com = server:119.29.29.29 // Google Download
dl.l.google.com = server:119.29.29.29 // Google Download
clientservices.googleapis.com = server:119.29.29.29 // Google Chrome
update.googleapis.com = server:119.29.29.29 // Google Update
translate.googleapis.com = server:119.29.29.29 // Google Translate
fonts.googleapis.com = server:119.29.29.29 // Google Fonts
fonts.gstatic.com = server:119.29.29.29 // Google Fonts
stun.l.google.com = server:syslib // Google STUN
stun?.l.google.com = server:syslib // Google STUN

# Router Admin Panel
*.id.ui.direct = server:syslib // Ubiquiti Unifi Network App
# unifi.ui.com = server:syslib // Ubiquiti Unifi Portal
unifi.local = server:syslib // Ubiquiti Unifi OS
# network.unifi.ui.com = server:syslib // Ubiquiti Unifi Controller
amplifi.lan = server:syslib // Ubiquiti Amplifi Router
router.synology.com = server:syslib // Synology Router
sila.razer.com = server:syslib // Razer Sila Router
router.asus.com = server:syslib // Asus Router
routerlogin.net = server:syslib // Netgear Router
orbilogin.com = server:syslib // Netgear Obri Router
www.LinksysSmartWiFi.com = server:syslib // Linksys Router
LinksysSmartWiFi.com = server:syslib // Linksys Router
myrouter.local = server:syslib // Linksys Router
instant.arubanetworks.com = server:syslib // Aurba Router
setmeup.arubanetworks.com = server:syslib // Aurba Router
www.miwifi.com = server:syslib // å°ç±³ Mi WiFi Router
miwifi.com = server:syslib // å°ç±³ Mi WiFi Router
mediarouter.home = server:syslib // åä¸º Huawei Router
tplogin.cn = server:syslib // TP-Link Router
tplinklogin.net = server:syslib // TP-Link Router
tplinkwifi.net = server:syslib // TP-Link Router
melogin.cn = server:syslib // æ°´æ˜Ÿ MERCURY Router
falogin.cn = server:syslib // è¿…æ· FAST Router
tendawifi.com = server:syslib // è…¾è¾¾ Tenda Router
leike.cc = server:syslib // ç£Šç§‘ Netcore Router
zte.home = server:syslib // ä¸­å…´ ZTE Router
p.to = server:syslib // æ–è®¯ PHICOMM Router
phicomm.me = server:syslib // æ–è®¯ PHICOMM Router
hiwifi.com = server:syslib // æè·¯ç”± HiWiFi Router
peiluyou.com = server:syslib // è¿…é›·è·¯ç”±
_hotspot_.m2m = server:syslib // M2M routers at MiFi Hotspot
hotspot.cslwifi.com = server:syslib // csl Wi-Fi

# Apple
# refer: https://support.apple.com/zh-cn/HT210060
networking.apple = server:https://doh.dns.apple.com/dns-query // Apple
# *.apple.com = server:https://doh.dns.apple.com/dns-query // Apple.com
*.icloud.com = server:https://doh.dns.apple.com/dns-query // iCloud.com

# Alphabet
# refer: https://developers.google.com/speed/public-dns/docs/doh?hl=zh-cn
# *.google = server:https://dns.google/dns-query // Google
*.google.com = server:https://dns.google/dns-query // Google
*.google.com.?? = server:https://dns.google/dns-query // Google
# *.goog = server:https://dns.google/dns-query // Google sites
*.gstatic.com = server:https://dns.google/dns-query // Google é™æ€èµ„æº
*.ggpht.com = server:https://dns.google/dns-query // Google Photos
*.googleusercontent.com = server:https://dns.google/dns-query // Google ç”¨æˆ·ä¸Šä¼ æ•°æ®
*.googleapis.com = server:https://dns.google/dns-query // Google APIs
*.1e100.net = server:https://dns.google/dns-query // Google backbone
*.youtube = server:https://dns.google/dns-query // Youtube sites
*.youtube.com = server:https://dns.google/dns-query // Youtube
*.ytimg.com = server:https://dns.google/dns-query // Youtube å›¾ç‰‡
*.googlevideo.com = server:https://dns.google/dns-query // Youtube Video
*.gvt?.com = server:https://dns.google/dns-query // Google Video Thumbnails
*.recaptcha.net = server:https://dns.google/dns-query // reCaptcha
*.gmail.com = server:https://dns.google/dns-query // Gmail
*.googlesource.com = server:https://dns.google/dns-query // Google Source
*.googleadservices.com = server:https://dns.google/dns-query // Google AD Services
*.doubleclick.net = server:https://dns.google/dns-query // DoubleClick
*.adsense.com = server:https://dns.google/dns-query // AdSense
*.adsensecustomsearchads.com = server:https://dns.google/dns-query // AdSense Custom Search Ads
*.adsenseformobileapps.com = server:https://dns.google/dns-query // AdSense for mobile apps
*.gle = server:https://dns.google/dns-query // Google shortened URLs
goo.gl = server:https://dns.google/dns-query // Google URL Shortener

# Cloudflare
# refer: https://developers.cloudflare.com/1.1.1.1/encryption/dns-over-https/make-api-requests/
*.cloudflare.com = server:https://cloudflare-dns.com/dns-query // Cloudflare
*.cloudflarestream.com = server:https://cloudflare-dns.com/dns-query // Cloudflare Stream
*.cloudflareclient.com = server:https://cloudflare-dns.com/dns-query // Cloudflare Client
*.cloudflareinsights.com = server:https://cloudflare-dns.com/dns-query // Cloudflare Web Analytics
*.every1dns.net = server:https://cloudflare-dns.com/dns-query // Cloudflare 1.1.1.1
# *.cloudflaressl.com = server:https://cloudflare-dns.com/dns-query // Cloudflare SSL Certificate
*.cloudflare-dns.com = server:https://cloudflare-dns.com/dns-query // Cloudflare DNS
*.workers.dev = server:https://cloudflare-dns.com/dns-query // CloudFlare Workers

# é˜¿é‡Œå·´å·´
# refer: https://www.alidns.com
*.alibaba.cn = server:https://dns.alidns.com/dns-query // é˜¿é‡Œå·´å·´
*.alibaba.com.cn = server:https://dns.alidns.com/dns-query // é˜¿é‡Œå·´å·´
*.china.alibaba.com = server:https://dns.alidns.com/dns-query // Alibaba ä¸­å›½
*.1688.com = server:https://dns.alidns.com/dns-query // 1688
*.taobao.com = server:https://dns.alidns.com/dns-query // æ·˜å®
*.tbcache.com = server:https://dns.alidns.com/dns-query // æ·˜å® ç¼“å­˜
*.tmall.com = server:https://dns.alidns.com/dns-query // å¤©çŒ«
*.alicdn.com = server:https://dns.alidns.com/dns-query // é˜¿é‡Œ CDN
*.alikunlun.com = server:https://dns.alidns.com/dns-query // é˜¿é‡Œæ˜†ä»‘
*.aliapp.com = server:https://dns.alidns.com/dns-query // äº‘å¼•æ“åº”ç”¨å¹³å°
*.aliapp.org = server:https://dns.alidns.com/dns-query // ä¸Šäº‘å¹³å°
*.alibabausercontent.com = server:https://dns.alidns.com/dns-query // é˜¿é‡Œç”¨æˆ·ä¸Šä¼ èµ„æ–™
*.mmstat.com = server:https://dns.alidns.com/dns-query // mmstat æ•°æ®ç»Ÿè®¡ å¹¿å‘Šè¿½è¸ª
tb.cn = server:https://dns.alidns.com/dns-query // æ·˜å®çŸ­ç½‘å€

# é˜¿é‡Œäº‘
# refer: https://www.alidns.com
*.aliyun.* = server:https://dns.alidns.com/dns-query // é˜¿é‡Œäº‘
*.aliyuncdn.* = server:https://dns.alidns.com/dns-query // é˜¿é‡Œäº‘ CDN
*.aliyuncs.com = server:https://dns.alidns.com/dns-query // é˜¿é‡Œäº‘ API æœåŠ¡
*.aliyunddos????.com = server:https://dns.alidns.com/dns-query // é˜¿é‡Œäº‘ DDoSé˜²æŠ¤
*.aliyundrive.com = server:https://dns.alidns.com/dns-query // é˜¿é‡Œäº‘ç›˜
*.aliyundun.com = server:https://dns.alidns.com/dns-query // é˜¿é‡Œäº‘ç›¾
*.aliyundunwaf.com = server:https://dns.alidns.com/dns-query // é˜¿é‡Œäº‘ç›¾ Web åº”ç”¨é˜²ç«å¢™
*.aliyun-inc.com = server:https://dns.alidns.com/dns-query // é˜¿é‡Œäº‘ å†…éƒ¨

# èš‚èšé›†å›¢
# refer: https://www.alidns.com
*.antgroup.com = server:https://dns.alidns.com/dns-query // èš‚èšé›†å›¢
*.antfin.com = server:https://dns.alidns.com/dns-query // èš‚èšé‡‘æœ
*.antfinancial.com = server:https://dns.alidns.com/dns-query // èš‚èšé‡‘æœ
*.alipay.com = server:https://dns.alidns.com/dns-query // æ”¯ä»˜å®
*.alipay.com.cn = server:https://dns.alidns.com/dns-query // æ”¯ä»˜å®
*.alipaydns.com = server:https://dns.alidns.com/dns-query // æ”¯ä»˜å® HTTP DNS
*.alipayeshop.com = server:https://dns.alidns.com/dns-query // æ”¯ä»˜å® å•†å®¶èµ„æº
*.alipaylog.com = server:https://dns.alidns.com/dns-query // æ”¯ä»˜å® Mdap
*.alipayobjects.com = server:https://dns.alidns.com/dns-query // æ”¯ä»˜å® é™æ€èµ„æº
*.alipay-eco.com = server:https://dns.alidns.com/dns-query // æ”¯ä»˜å® å¼€æ”¾æŠ€æœ¯ç”Ÿæ€ä½“ç³»

# è…¾è®¯
# refer: https://www.dnspod.cn/products/publicdns
*.tencent.com = server:https://doh.pub/dns-query // è…¾è®¯
*.qcloud.com = server:https://doh.pub/dns-query // è…¾è®¯äº‘
*.qcloudcdn.cn = server:https://doh.pub/dns-query // è…¾è®¯äº‘CDN
*.qcloudcdn.com = server:https://doh.pub/dns-query // è…¾è®¯äº‘CDN
*.qcloudcos.com = server:https://doh.pub/dns-query // è…¾è®¯äº‘å¯¹è±¡å‚¨å­˜
*.qcloudimg.com = server:https://doh.pub/dns-query // è…¾è®¯äº‘é™æ€èµ„æº
*.qcloudcjgj.com = server:https://doh.pub/dns-query // è…¾è®¯äº‘è¶…çº§ç®¡å®¶
*.qcloudwzgj.com = server:https://doh.pub/dns-query // è…¾è®¯äº‘ç½‘ç«™ç®¡å®¶
*.qcloudzygj.com = server:https://doh.pub/dns-query // è…¾è®¯äº‘ä¸»é¡µç®¡å®¶
*.myqcloud.com = server:https://doh.pub/dns-query // è…¾è®¯å¼€æ”¾äº‘
*.tencent-cloud.net = server:https://doh.pub/dns-query // è…¾è®¯äº‘
*.tencentcloud-aiot.com = server:https://doh.pub/dns-query // è…¾è®¯äº‘aiotè§£å†³æ–¹æ¡ˆ
*.tencentcloudapi.com = server:https://doh.pub/dns-query // è…¾è®¯äº‘API
*.tencentcloudcr.com = server:https://doh.pub/dns-query // è…¾è®¯äº‘å®¹å™¨é•œåƒæœåŠ¡TCR
*.tencentcloudmarket.com = server:https://doh.pub/dns-query // è…¾è®¯äº‘äº‘å¸‚åœº
*.qq.com = server:https://doh.pub/dns-query // QQ
*.qlogo.cn = server:https://doh.pub/dns-query // è…¾è®¯å¤´åƒ
*.qpic.cn = server:https://doh.pub/dns-query // è…¾è®¯å›¾ç‰‡
*.weixin.qq.com = server:https://doh.pub/dns-query // å¾®ä¿¡
*.wx.qq.com = server:https://doh.pub/dns-query // å¾®ä¿¡
*.weixin.com = server:https://doh.pub/dns-query // å¾®ä¿¡
*.weixinbridge.com = server:https://doh.pub/dns-query // å¾®ä¿¡å…¬ä¼—å¹³å°
*.wechat.com = server:https://doh.pub/dns-query // WeChat
*.servicewechat.com = server:https://doh.pub/dns-query // å¾®ä¿¡å°ç¨‹åº
*.weiyun.com = server:https://doh.pub/dns-query // å¾®äº‘
*.gtimg.cn = server:https://doh.pub/dns-query // è…¾è®¯ å›¾ç‰‡ é™æ€èµ„æº
*.idqqimg.com = server:https://doh.pub/dns-query // è…¾è®¯ å›¾ç‰‡ é™æ€èµ„æº
*.cdn-go.cn = server:https://doh.pub/dns-query // è…¾è®¯ é™æ€èµ„æº CDN
*.smtcdns.com = server:https://doh.pub/dns-query // è…¾è®¯äº‘ æ™ºèƒ½äº‘è§£æDNS
*.smtcdns.net = server:https://doh.pub/dns-query // è…¾è®¯äº‘ æ™ºèƒ½äº‘è§£æDNS
url.cn = server:https://doh.pub/dns-query // è…¾è®¯çŸ­ç½‘å€

# ç™¾åº¦
# refer: https://dudns.baidu.com/support/localdns/Address/index.html
*.baidu = server:180.76.76.76 // ç™¾åº¦
*.baidu.com = server:180.76.76.76 // ç™¾åº¦
*.bdimg.com = server:180.76.76.76 // ç™¾åº¦ é™æ€èµ„æº
*.bdstatic.com = server:180.76.76.76 // ç™¾åº¦ é™æ€èµ„æº
*.baidupcs.* = server:180.76.76.76 // ç™¾åº¦ç½‘ç›˜
*.baiduyuncdn.* = server:180.76.76.76 // ç™¾åº¦äº‘CDN
*.baiduyundns.* = server:180.76.76.76 // ç™¾åº¦äº‘DNS
*.bdydns.* = server:180.76.76.76 // ç™¾åº¦äº‘ DNS
*.bdycdn.* = server:180.76.76.76 // ç™¾åº¦äº‘ CDN
*.bdysite.com = server:180.76.76.76 // ç™¾åº¦äº‘ åŸŸå
*.bdysites.com = server:180.76.76.76 // ç™¾åº¦äº‘ åŸŸå
*.baidubce.* = server:180.76.76.76 // ç™¾åº¦æ™ºèƒ½äº‘
*.bcedns.* = server:180.76.76.76 // ç™¾åº¦æ™ºèƒ½äº‘ DNS
*.bcebos.com = server:180.76.76.76 // ç™¾åº¦æ™ºèƒ½äº‘ å¯¹è±¡å­˜å‚¨BOS
*.bcevod.com = server:180.76.76.76 // ç™¾åº¦æ™ºèƒ½äº‘ æ’­æ”¾å™¨æœåŠ¡
*.bceimg.com = server:180.76.76.76 // ç™¾åº¦æ™ºèƒ½äº‘ å›¾ç‰‡æœåŠ¡
*.bcehost.com = server:180.76.76.76 // ç™¾åº¦æ™ºèƒ½äº‘ ä¸»æœº
*.bcehosts.com = server:180.76.76.76 // ç™¾åº¦æ™ºèƒ½äº‘ ä¸»æœº
dwz.cn = server:180.76.76.76 // ç™¾åº¦çŸ­ç½‘å€

# 360
# refer: https://sdns.360.net/dnsPublic.html#course
*.360.cn = server:https://doh.360.cn/dns-query // 360å®‰å…¨ä¸­å¿ƒ
*.360safe.com = server:https://doh.360.cn/dns-query // 360å®‰å…¨å«å£«
*.360kuai.com = server:https://doh.360.cn/dns-query // 360å¿«èµ„è®¯
*.so.com = server:https://doh.360.cn/dns-query // 360æœç´¢
*.360webcache.com = server:https://doh.360.cn/dns-query // 360ç½‘é¡µå¿«ç…§æœåŠ¡
*.qihuapi.com = server:https://doh.360.cn/dns-query // å¥‡è™api
*.qhimg.com = server:https://doh.360.cn/dns-query // 360å›¾åºŠ
*.qhimgs.com = server:https://doh.360.cn/dns-query // 360å›¾åºŠ
*.qhimgs?.com = server:https://doh.360.cn/dns-query // 360å›¾åºŠ
*.qhmsg.com = server:https://doh.360.cn/dns-query // 360
*.qhres.com = server:https://doh.360.cn/dns-query // å¥‡è™é™æ€èµ„æº
*.qhres?.com = server:https://doh.360.cn/dns-query // å¥‡è™é™æ€èµ„æº
*.dhrest.com = server:https://doh.360.cn/dns-query // å¯¼èˆªé™æ€æ–‡ä»¶
*.qhupdate.com = server:https://doh.360.cn/dns-query // 360
*.yunpan.cn = server:https://doh.360.cn/dns-query // 360å®‰å…¨äº‘ç›˜
*.yunpan.com.cn = server:https://doh.360.cn/dns-query // 360å®‰å…¨äº‘ç›˜
*.yunpan.com = server:https://doh.360.cn/dns-query // 360å®‰å…¨äº‘ç›˜
urlqh.cn = server:https://doh.360.cn/dns-query // 360çŸ­ç½‘å€

# Bytedance
# refer: https://www.volcengine.com/docs/6758/179060
*.amemv.com = server:180.184.1.1 // è‰¾ç‰¹è¿·
*.bdxiguaimg.com = server:180.184.1.1 // è¥¿ç“œ å›¾ç‰‡æœåŠ¡
*.bdxiguastatic.com = server:180.184.1.1 // è¥¿ç“œ é™æ€èµ„æº
*.byted-static.com = server:180.184.1.1 // å­—èŠ‚è·³åŠ¨ UNPKG
*.bytedance.* = server:180.184.1.1 // å­—èŠ‚è·³åŠ¨
*.bytedns.net = server:180.184.1.1 // å­—èŠ‚è·³åŠ¨ DNS
*.bytednsdoc.com = server:180.184.1.1 // å­—èŠ‚è·³åŠ¨ CDN æ–‡ä»¶å­˜å‚¨
*.bytegoofy.com = server:180.184.1.1 // å­—èŠ‚è·³åŠ¨ Goofy
*.byteimg.com = server:180.184.1.1 // å­—èŠ‚è·³åŠ¨ å›¾ç‰‡æœåŠ¡
*.bytescm.com = server:180.184.1.1 // å­—èŠ‚è·³åŠ¨ SCM
*.bytetos.com = server:180.184.1.1 // å­—èŠ‚è·³åŠ¨ TOS
*.bytexservice.com = server:180.184.1.1 // é£ä¹¦ä¼ä¸šæœåŠ¡å¹³å°
*.douyin.com = server:180.184.1.1 // æŠ–éŸ³
*.douyinpic.com = server:180.184.1.1 // æŠ–éŸ³ é™æ€èµ„æº
*.douyinstatic.com = server:180.184.1.1 // æŠ–éŸ³ é™æ€èµ„æº
*.douyinvod.com = server:180.184.1.1 // æŠ–éŸ³ é™æ€èµ„æº
*.feelgood.cn = server:180.184.1.1 // FeelGoodå¹³å°
*.feiliao.com = server:180.184.1.1 // é£èŠå®˜ç½‘
*.gifshow.com = server:180.184.1.1 // å¿«æ‰‹
*.huoshan.com = server:180.184.1.1 // ç«å±±ç½‘
*.huoshanzhibo.com = server:180.184.1.1 // ç«å±±ç›´æ’­
*.ibytedapm.com = server:180.184.1.1 // æŠ–éŸ³ dapm
*.iesdouyin.com = server:180.184.1.1 // æŠ–éŸ³ CDN
*.ixigua.com = server:180.184.1.1 // è¥¿ç“œè§†é¢‘
*.kspkg.com = server:180.184.1.1 // å¿«æ‰‹
*.pstatp.com = server:180.184.1.1 // æŠ–éŸ³ é™æ€èµ„æº
*.snssdk.com = server:180.184.1.1 // ä»Šæ—¥å¤´æ¡
*.toutiao.com = server:180.184.1.1 // ä»Šæ—¥å¤´æ¡
*.toutiao13.com = server:180.184.1.1 // ä»Šæ—¥å¤´æ¡
*.toutiao???.??? = server:180.184.1.1 // ä»Šæ—¥å¤´æ¡ é™æ€èµ„æº
*.toutiaocloud.cn = server:180.184.1.1 // å¤´æ¡äº‘
*.toutiaocloud.com = server:180.184.1.1 // å¤´æ¡äº‘
*.toutiaopage.com = server:180.184.1.1 // ä»Šæ—¥å¤´æ¡ å»ºç«™
*.wukong.com = server:180.184.1.1 // æ‚Ÿç©º
*.zijieapi.com = server:180.184.1.1 // å­—èŠ‚è·³åŠ¨ API
*.zijieimg.com = server:180.184.1.1 // å­—èŠ‚è·³åŠ¨ å›¾ç‰‡æœåŠ¡
*.zjbyte.com = server:180.184.1.1 // ä»Šæ—¥å¤´æ¡ ç½‘é¡µç‰ˆ
*.zjcdn.com = server:180.184.1.1 // å­—èŠ‚è·³åŠ¨ CDN

# BiliBili
*.bilibili.com = server:syslib // BiliBili
*.biliapi.com = server:syslib // BiliBili API
*.biliapi.net = server:syslib // BiliBili API
*.bilicdn?.com = server:syslib // BiliBili CDN
*.hdslb.com = server:syslib // BiliBili é™æ€èµ„æº
*.hdslb.net = server:syslib // BiliBili é™æ€èµ„æº
cn-hk-eq-bcache-??.bilivideo.com = server:syslib // BiliBili è§†é¢‘æœåŠ¡å™¨ï¼ˆunknownï¼‰
upos-hz-mirrorakam.akamaized.net = server:syslib // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆakamaiï¼‰
upos-sz-mirrorasiaov.bilibilivideo.com = server:syslib // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆasia-abroad.comï¼‰
upos-sz-mirrorali.bilivideo.com = server:https://dns.alidns.com/dns-query // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘ï¼‰
upos-sz-mirrorali?.bilivideo.com = server:https://dns.alidns.com/dns-query // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘ï¼‰
upos-sz-mirrorali??.bilivideo.com = server:https://dns.alidns.com/dns-query // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘ï¼‰
upos-sz-mirrorbos.bilivideo.com = server:180.76.76.76 // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆç™¾åº¦äº‘ï¼‰
upos-sz-mirrorcos.bilivideo.com = server:https://doh.pub/dns-query // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆè…¾è®¯äº‘ï¼‰
upos-sz-mirrorcos?.bilivideo.com = server:https://doh.pub/dns-query // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆè…¾è®¯äº‘ï¼‰
upos-sz-mirrorcos??.bilivideo.com = server:https://doh.pub/dns-query // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆè…¾è®¯äº‘ï¼‰
upos-sz-mirrorhw.bilivideo.com = server:syslib // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆåä¸ºäº‘ï¼‰
upos-sz-mirrorhw?.bilivideo.com = server:syslib // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆåä¸ºäº‘ï¼‰
upos-sz-mirrorhwo?.bilivideo.com = server:syslib // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆåä¸ºäº‘ï¼‰
upos-sz-mirrorks3.bilivideo.com = server:syslib // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆé‡‘å±±äº‘ï¼‰
upos-sz-mirrorks3?.bilivideo.com = server:syslib // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆé‡‘å±±äº‘ï¼‰
upos-sz-mirrorkodo.bilivideo.com = server:syslib // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆä¸ƒç‰›äº‘ï¼‰
upos-sz-mirrorkodo?.bilivideo.com = server:syslib // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆä¸ƒç‰›äº‘ï¼‰
upos-sz-mirrorwcs.bilivideo.com = server:syslib // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆç½‘å®¿ï¼‰
upos-sz-mirrorwcs?.bilivideo.com = server:syslib // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆç½‘å®¿ï¼‰
upos-sz-mirrorxycdn.bilivideo.com = server:syslib // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆè¿…é›·ï¼‰
upos-sz-upcdnbd??.bilivideo.com = server:180.76.76.76 // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆç™¾åº¦äº‘ï¼‰
upos-sz-upcdnhw.bilivideo.com = server:syslib // BiliBili uuposè§†é¢‘æœåŠ¡å™¨ï¼ˆåä¸ºäº‘ï¼‰
upos-sz-upcdntx.bilivideo.com = server:https://doh.pub/dns-query // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆè…¾è®¯äº‘ï¼‰
upos-sz-upcdnws.bilivideo.com = server:syslib // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆç½‘å®¿ï¼‰
upos-tf-all-js.bilivideo.com = server:syslib // BiliBili uposè§†é¢‘æœåŠ¡å™¨ï¼ˆunknownï¼‰
*.mcdn.bilivideo.com = server:syslib // BiliBili mCDNè§†é¢‘æœåŠ¡å™¨
*.bilivideo.com = server:syslib // BiliBili è§†é¢‘
*.bilivideo.cn = server:syslib // BiliBili è§†é¢‘
acg.tv = server:syslib // BiliBiliçŸ­ç½‘å€

# äº¬ä¸œ
*.jd.com = server:syslib // äº¬ä¸œ
*.360buyimg.com = server:syslib // äº¬ä¸œ é™æ€èµ„æº
*.jdcloud.com = server:syslib // äº¬ä¸œäº‘
*.jcloudstatic.com = server:syslib // äº¬ä¸œäº‘ ç¼“å­˜å’Œå­˜å‚¨
*.jcloudstatic.net = server:syslib // äº¬ä¸œäº‘ é™æ€èµ„æº
*.jdgslb.com = server:syslib // äº¬ä¸œäº‘ å…¨å±€è´Ÿè½½å‡è¡¡
3.cn = server:syslib // äº¬ä¸œçŸ­ç½‘å€

# ğŸ‡¨ğŸ‡³ CHN
# CNNIC SDNS
# *.gov.cn = server:1.2.4.8 // ä¸­å›½æ”¿åºœç½‘
# *.æ”¿åŠ¡ = server:1.2.4.8 // ä¸­å›½æ”¿åºœç½‘

# ğŸ‡­ğŸ‡° HKG
# PCCW Enterprises Limited
# *.pccw.com = server:dns1.pccw.com // ç”µè®¯ç›ˆç§‘
# *.1010.com.hk = server:dns1.pccw.com // 1O1O
# *.hkcsl.com = server:dns1.pccw.com // csl.
# *.theclub.com.hk = server:dns1.pccw.com // The CLUB by HKT
# *.now.com = server:dns2.pccw.com // now.com
# *.nowe.com = server:dns2.pccw.com // Now E
# *.now-tv.com = server:dns2.pccw.com // Now TV
# *.moov.hk = server:dns3.pccw.com // MOOV
# *.viu.com = server:dns3.pccw.com // viu
# *.viu.tv = server:dns3.pccw.com // viu tv
# Hong Kong Cable Television Limited
# *.hkcable.com.hk = server:dns1.hkcable.com.hk // Hong Kong Cable Television Limited
# *.i-cable.com = server:dns2.hkcable.com.hk // i-CABLE
# *.cabletv.com.hk = server:dns2.hkcable.com.hk // CABLE TV Service
# KDDI Hong Kong Limited
# *.hk.kddi.com = server:apple.kdd.net.hk // KDDI Hong Kong

# ğŸ‡¹ğŸ‡¼ TWN
# ä¸­åç”µä¿¡
*.cht.com.tw = server:https://dns.hinet.net/dns-query // ä¸­åç”µä¿¡
*.hinet.net = server:https://dns.hinet.net/dns-query // ä¸­åç”µä¿¡HiNet
*.emome.net = server:https://dns.hinet.net/dns-query // ä¸­åç”µä¿¡emome
# So-net
# so-net.net.tw = server:ns1.so-net.net.tw // So-net Entertainment Taiwan
# so-net.tw = server:ns1.so-net.net.tw // So-net Entertainment Taiwan
# Taiwan Network Information Center
*.tw = server:https://dns.twnic.tw/dns-query // TWNIC DNS
*.taipei = server:https://dns.twnic.tw/dns-query // TWNIC DNS

# ğŸ‡ºğŸ‡¸ USA
# Hurricane Electric
*.he.net = server:https://ordns.he.net/dns-query // HE.net

[Rule]
# å®šä½æœåŠ¡ï¼ˆV3ï¼‰
# Country Code
DOMAIN,gspe1-ssl.ls.apple.com,DIRECT

# çŸ¥ä¹åŠ©æ‰‹
# æ‹¦æˆªå¼€å±å¹¿å‘Š
URL-REGEX,^https?:\/\/api\.zhihu\.com\/commercial_api\/launch_v2\?,REJECT
URL-REGEX,^https?:\/\/api\.zhihu\.com\/commercial_api\/real_time_launch_v2\?,REJECT
# æ‹¦æˆªå“ç‰Œæé—®
URL-REGEX,^https?:\/\/api\.zhihu\.com\/brand\/question\/\d+/card\?,REJECT
URL-REGEX,^https?:\/\/www\.zhihu\.com\/api\/v\d+\/brand\/question/\d+/card\?,REJECT
# å…¶ä»–æ‹¦æˆªä¸å½±å“ä½¿ç”¨çš„åŸŸå
DOMAIN,mqtt.zhihu.com,REJECT
DOMAIN,sugar.zhihu.com,REJECT
DOMAIN,crash2.zhihu.com,REJECT
DOMAIN,appcloud.zhihu.com,REJECT
DOMAIN,appcloud2.in.zhihu.com,REJECT

# ç™¾åº¦è´´å§å»å¹¿å‘Š
RULE-SET,https://raw.githubusercontent.com/app2smile/rules/master/rule/tieba-ad.list,REJECT-DROP

# èœé¸Ÿå‡€åŒ–
# Surge å¿…é¡»å±è”½
AND,((OR,((USER-AGENT,Cainiao*), (USER-AGENT,AMap*))), (URL-REGEX,^http:\/\/(amdc|\d).+\/amdc\/mobileDispatch$)),REJECT-DROP

[Map Local]
# çŸ¥ä¹åŠ©æ‰‹
^https?:\/\/118\.89\.204\.198 data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
^https?:\/\/103\.41\.167\.237 data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
^https?:\/\/2402:4e00:1200:ed00:0:9089:6dac:96b6 data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# å±è”½ä¸‹å‘çš„é…ç½®ï¼Œå¦‚çš®è‚¤ç­‰
^https?:\/\/api\.zhihu\.com\/ab\/api\/v1\/products\/zhihu\/platforms\/ios\/config data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json" header="Content-Type: application/x-protobuf"
# å±è”½æˆ‘çš„é¡µé¢å¼€é€šä¼šå‘˜çš„å¡ç‰‡
# ^https?:\/\/api\.zhihu\.com\/unlimited\/go\/my_card data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# å»é™¤åº•éƒ¨æ ‡ç­¾é¡µå…³æ³¨äººè§’æ ‡
^https?:\/\/api\.zhihu\.com\/moments\/tab_v2 data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# å»é™¤æ¶ˆæ¯é€šçŸ¥è§’æ ‡
^https?:\/\/api\.zhihu\.com\/(notifications\/v\d\/count) data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# æ‹¦æˆªå›ç­”ä¸‹çš„å¡ç‰‡å¹¿å‘Š
^https?:\/\/www\.zhihu\.com\/api\/v\d\/answers\/\d+\/recommendations data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# æ‹¦æˆªåº”ç”¨å†…å¼¹çª—
^https?:\/\/api\.zhihu\.com\/me\/guides data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# å»é™¤å…³æ³¨é¡µæœ€å¸¸è®¿é—®
^https?:\/\/api\.zhihu\.com\/moments\/recent data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# æ‹¦æˆªæ¨èé¡µé¡¶éƒ¨å¹¿å‘Š
^https?:\/\/api\.zhihu\.com\/api\/v4\/ecom_data\/config data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# åº•æ åŠ å·çš„å¹¿å‘Š
^https?:\/\/api\.zhihu\.com\/content-distribution-core\/bubble\/common\/settings data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# æ¨èé¡µæœç´¢æ å·¦ä¾§å›¾æ ‡
^https?:\/\/api\.zhihu\.com\/feed\/render\/revisit\/current_reading data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# ç–‘ä¼¼æ¨èé¡µå†…å®¹æ›´æ–°çº¢ç‚¹
^https?:\/\/api\.zhihu\.com\/feed\/render\/revisit\/tag_config data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# å»é™¤å›ç­”é¡µçš„ç›¸å…³æœç´¢
^https?:\/\/www\.zhihu\.com\/api\/v\d+\/search\/related_queries\/answer data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# æš‚ä¸æ¸…æ¥šä½œç”¨
^https?:\/\/api\.zhihu\.com\/commercial_api\/banners_v3\/app_topstory_banner data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
^https?:\/\/api\.zhihu\.com\/ad-style-service\/request data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"

# å¾®åšå›½é™…ç‰ˆ
# çƒ­é—¨è§†é¢‘ | çƒ­æ¨è
^https?:\/\/api\.weibo\.cn\/\d\/(cardlist\?v_f=\d|ad\/weibointl\?) data="https://raw.githubusercontent.com/Keywos/rule/main/mocks/reject-dict.json"
^https?:\/\/weibointl\.api\.weibo\.cn\/portal\.php\?a=hot_search_users data="https://raw.githubusercontent.com/Keywos/rule/main/mocks/reject-dict.json"

# ç™¾åº¦é¦–é¡µå‡€åŒ– m.baidu.com,www.baidu.com
^https?:\/\/(www|m)\.baidu\.com\/?($|\?(from=\w{8,9}|tn=&from=)) data="https://raw.githubusercontent.com/Keywos/rule/main/mocks/baidu.html" header="Content-Type: text/html; charset=utf-8"

# èœé¸Ÿå‡€åŒ–
^https?:\/\/guide-acs\.m\.taobao\.com\/gw\/mtop\.cainiao\.(nbmensa\.research\.researchservice\.consultmerge|adx\.flyad\.getad) data="https://raw.githubusercontent.com/Keywos/rule/main/mocks/reject-dict.json"
^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.com\.cainiao\.longquan\.place\.getpageresourcecontent\.cn\/\d\. data="https://raw.githubusercontent.com/Keywos/rule/main/mocks/reject-dict.json"
^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.cainiao\.(guoguo\.nbnetflow\.ads\.index\.cn\/\d\.|adkeyword\.get\.cn\/1\d\.|nbmensa\.research\.researchservice\.(acquire|event|close)\.cn\/\d\.) data="https://raw.githubusercontent.com/Keywos/rule/main/mocks/reject-dict.json"

# ç™¾åº¦è¾“å…¥æ³•
# å¼€å±
^https?:\/\/mime\.baidu\.com\/v5\/start_screen_ads/list data="https://raw.githubusercontent.com/Keywos/rule/main/mocks/reject-dict.json"
# åº”ç”¨å†…çµæ„Ÿè¯­å½• è¾“å…¥é¡µé¢æ¨èé‡Œè¯­å½•
^https?:\/\/mime\.baidu\.com\/sapi\/v1\/lccorpus\/(applist|pannellist) data="https://raw.githubusercontent.com/Keywos/rule/main/mocks/mime.json"
# ç‚¹å‡»å›¾æ ‡ | æ”¶é›†å’Œåˆ†æç”¨æˆ·çš„è¾“å…¥æ•°æ®
^https?:\/\/mime\.baidu\.com\/sapi\/v1\/(circle\/joinedlist|lccorpus\/usercorpussync|aihelpactivity\/aihelpresource) data="https://raw.githubusercontent.com/Keywos/rule/main/mocks/mime.json"
^https?:\/\/mime\.baidu\.com\/commer\/pocket_api\/enterprise_list data="https://raw.githubusercontent.com/Keywos/rule/main/mocks/mime.json"
^https?:\/\/mbd\.baidu\.com\/ccs\/v1\/start\/confsync\?appname=baidu_input data="https://raw.githubusercontent.com/Keywos/rule/main/mocks/bd.json"
#^https?:\/\/h2tcbox\.baidu\.com\/ztbox\?action=zubc\&appname=baidu_input data="https://raw.githubusercontent.com/Keywos/rule/main/mocks/bd.json"
# log
^https:\/\/mime\.baidu\.com\/v5\/(fb\/st\?logtype|(notiv3|cellloc_noti|noti_cloudswitch_noti)\/info) data="https://raw.githubusercontent.com/Keywos/rule/main/mocks/mime.json"

# ä»€ä¹ˆå€¼å¾—ä¹°å»å¹¿å‘Š
# å¥½ä»·è¯¦æƒ…é¡µ
^https?:\/\/haojia\.m\.smzdm\.com\/detail_modul\/other_modul - reject
# å¥½ä»·è¯¦æƒ…é¡µçº¢åŒ…å°åŠ©æ‰‹
^https?:\/\/haojia\.m\.smzdm\.com\/detail_modul\/user_related_modul - reject
# Wikiï¼ˆ618 æ™’ç‰©æ´»åŠ¨æ¨å¹¿ï¼Œå°†æ¥å¯èƒ½ä¸æ˜¯å¹¿å‘Šï¼‰
^https?:\/\/haojia\.m\.smzdm\.com\/detail_modul\/wiki_related_modul - reject

# å»é™¤ Youtube å¹¿å‘Š
^https?:\/\/[\w-]+\.googlevideo\.com\/initplayback.+&oad data="https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/dist/blank.txt" header="Content-Type: application/vnd.yt-ump"

[Header Rewrite]
# è§£é”å¿…åº”æµè§ˆå™¨ AI æœç´¢é™åˆ¶ï¼ˆ23.02.28ï¼‰
^https:\/\/www\.bing\.com\/(search|new) header-replace-regex User-Agent ^\w+\/[0-9\.\s]+\((\w+);.+ "Mozilla/5.0 ($1; Intel Mac OS X 10_12_6) AppleWebKit/537.36 Chrome/110.0 Safari/537.36 Edg/110.0"

[URL Rewrite]
# è·³è¿‡é‡å®šå‘ç•Œé¢
# çŸ¥ä¹
^https:\/\/link\.zhihu\.com\/\?target=(https?)?(%3A|:)?(\/\/|%2F%2F)?(.*?)(&source.*)?$ http://$4 302
# 115
^https?:\/\/home\.115\.com\/go\?(https?:\/\/)?(.*) http://$2 302

# å“”å“©å“”å“©
^https?:\/\/app\.bilibili\.com\/x\/resource\/ip - reject

[Panel]
æŸ¥è¯¢èŠ‚ç‚¹ä¿¡æ¯ = script-name=æŸ¥è¯¢èŠ‚ç‚¹ä¿¡æ¯,update-interval=43200
æœåŠ¡è§£é”æ£€æµ‹ lite = script-name=æœåŠ¡è§£é”æ£€æµ‹ lite,update-interval=7200

[Script]
æŸ¥è¯¢èŠ‚ç‚¹ä¿¡æ¯ = type=generic,timeout=8,script-path=https://raw.githubusercontent.com/MingdeCZ/OutSide-Reborn/main/Surge/Scripts/Networkcheck.js
æœåŠ¡è§£é”æ£€æµ‹ lite = type=generic,timeout=30,script-path=https://raw.githubusercontent.com/MingdeCZ/OutSide-Reborn/main/Surge/Scripts/Servicecheck-lite.js,script-update-interval=0,argument=title=æœåŠ¡è§£é”æ£€æµ‹ lite&icon=play.tv&color=#D22F28

# @I-am-R-Eï¼ˆæ›´å¤šè„šæœ¬ä¿¡æ¯è¯·è‡ªè¡Œåœ¨ https://github.com/I-am-R-E/Functional-Store-Hub ä¸­æŸ¥æ‰¾ï¼‰
# è§£é” Xmind æ€ç»´å¯¼å›¾è®¢é˜…åˆ° 2030 å¹´ www.xmind.cn, www.xmind.net, www.xmind.app
Xmind æ€ç»´å¯¼å›¾ = type=http-response,pattern=https?:\/\/www\.xmind\.(cn|net|app)\/\_res\/devices,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/I-am-R-E/Functional-Store-Hub/Master/Xmind/Script/Xmind.js,script-update-interval=0

# è§£é”è´¢æ–°æ–‡ç« é˜…è¯»ä¸éŸ³é¢‘é™åˆ¶ gateway.caixin.com
è´¢æ–°ä¼šå‘˜ = type=http-request,pattern=^https?:\/\/gateway\.caixin\.com\/api\/app\-api\/auth\/(validate|validateAudioAuth),requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/I-am-R-E/Functional-Store-Hub/Master/CaiXin/Script/CaiXin.js,script-update-interval=0

# è´¢æ–°å‘¨åˆŠä¼šå‘˜ï¼ˆç™»é™†è´¦å·ä½“éªŒæ›´åŠ ï¼‰ï¼ˆ22.07.12ï¼‰ipadcms.caixin.com
è´¢æ–°å‘¨åˆŠ = type=http-response,pattern=^https?:\/\/ipadcms\.caixin\.com\/(api|tmp|power)\/(articles?|myfree(v\d+)?),requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/I-am-R-E/Functional-Store-Hub/Master/CaiXinWeekly/Script/CaiXinWeekly.js,script-update-interval=0

# è§£é”æµåˆ©è¯´Â·é˜…è¯»ä¼šå‘˜ã€è§£é”é˜…è¯»æƒé™ã€è§£é”éŸ³é¢‘æƒé™ç­‰ vira.llsapp.com
æµåˆ©è¯´Â·é˜…è¯» = type=http-response,pattern=^https?:\/\/vira\.llsapp\.com\/api\/v\d\/\w+\/\w+$,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/I-am-R-E/Functional-Store-Hub/Master/LiuLiShuoYueDu/Script/LiuLiShuoYueDu.js,script-update-interval=0

# è§£é” PlaneFinder é«˜çº§è®¢é˜… app-live.planefinder.net
PlaneFinder = type=http-response,pattern=^https?:\/\/app\-live\.planefinder\.net\/api\/v\d+\/account\/\w+\/login,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/I-am-R-E/Functional-Store-Hub/Master/PlaneFinder/Script/PlaneFinder.js,script-update-interval=0

# WPS è§£é”æœ¬åœ°ä¼šå‘˜ï¼ˆæ”¯æŒå¤§é™†ç‰ˆä»¥åŠéå¤§é™†ç‰ˆï¼‰ï¼ˆ22.07.10ï¼‰account.wps.cn, *account.wps.com
WPS ä¼šå‘˜ = type=http-response,pattern=^https?:\/\/.*?account\.wps\.(com|cn)(:\d+)?\/api\/users\/\w+\/overview$,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/I-am-R-E/Functional-Store-Hub/Master/WPSOffice/Script/WPS.js,script-update-interval=0

# @NobyDa ï¼ˆæ›´å¤šè„šæœ¬ä¿¡æ¯è¯·è‡ªè¡Œåœ¨ https://github.com/NobyDa/Script ä¸­æŸ¥æ‰¾ï¼‰
# TestFlight è´¦æˆ·ç®¡ç†ï¼ˆè‡ªåŠ¨å­˜å‚¨/åˆå¹¶å¤šä¸ª TestFlight è´¦æˆ·åˆ—è¡¨ï¼Œå¹¶å¯åˆ†äº«/å¯¼å‡º TestFlight APPï¼‰testflight.apple.com
TestFlight è´¦æˆ·ç®¡ç† = type=http-request,pattern=^https:\/\/testflight\.apple\.com\/v\d\/(app|account|invite)s\/,requires-body=1,script-path=https://raw.githubusercontent.com/NobyDa/Script/master/TestFlight/TestFlightAccount.js

# TestFlight åŒºåŸŸé™åˆ¶è§£é™¤ï¼ˆè¯¥æ¨¡å—é€‚ç”¨äºæ›´æ–° TestFlight App æ—¶, æç¤º "APPä¸å¯ç”¨" é—®é¢˜ï¼‰testflight.apple.com
TestFlight ä¸‹è½½ä¿®æ­£ = type=http-request,pattern=^https?:\/\/testflight\.apple\.com\/v\d\/accounts\/.+?\/install$,requires-body=1,script-update-interval=-1,max-size=0,script-path=https://gist.githubusercontent.com/NobyDa/9be418b93afc5e9c8a8f4d28ae403cf2/raw/TF_Download.js

# å“”å“©å“”å“©(ç™½å›¾æ ‡å¤–åŒºç‰ˆ)æ¸¯æ¾³å°ç•ªå‰§è‡ªåŠ¨åˆ‡æ¢åœ°åŒº & æ˜¾ç¤ºè±†ç“£è¯„åˆ†ï¼ˆ23.02.11ï¼‰ï¼ˆåœ°åŒºè‡ªåŠ¨åˆ‡æ¢åŠŸèƒ½ä»…é€‚ç”¨äº 4.7+ã€‚å¦‚éœ€æœç´¢æŒ‡å®šåœ°åŒºç•ªå‰§ï¼Œå¯åœ¨æœç´¢æ¡†æ·»åŠ åç¼€" æ¸¯"ï¼Œ" å°"ï¼Œ " ä¸­" ä¾‹å¦‚: è¿›å‡»çš„å·¨äºº æ¸¯ï¼‰ap?.bili*i.com, ap?.bili*i.net
Bili Region = type=http-response,pattern=^https:\/\/ap(p|i)\.bili(bili|api)\.(com|net)\/(pgc\/view\/v\d\/app\/season|x\/offline\/version)\?,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/NobyDa/Script/master/Surge/JS/Bili_Auto_Regions.js
Bili Search = type=http-request,pattern=^https:\/\/ap(p|i)\.bili(bili|api)\.(com|net)\/x\/v\d\/search(\/type)?\?.+?%20(%E6%B8%AF|%E5%8F%B0|%E4%B8%AD)&,script-path=https://raw.githubusercontent.com/NobyDa/Script/master/Surge/JS/Bili_Auto_Regions.js

# å¾®ä¿¡å»é™¤å…¬ä¼—å·æ–‡ç« åº•éƒ¨å¹¿å‘Šï¼ˆ23.03.14ï¼‰ mp.weixin.qq.com
http-response ^https?:\/\/mp\.weixin\.qq\.com\/mp\/getappmsgad requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/File/Wechat.js

# # è§£é”å¿…åº”æµè§ˆå™¨ AI æœç´¢é™åˆ¶ï¼ˆ23.02.28ï¼‰www.bing.com
# @VirgilClyne ï¼ˆæ›´å¤šè„šæœ¬ä¿¡æ¯ã€ç”¨æ³•å’Œæ•™ç¨‹è¯·è‡ªè¡Œåœ¨ https://github.com/VirgilClyne/iRingo ä¸­æŸ¥æ‰¾ï¼‰
# è§£é”ï£¿åŸè£…
# å®šä½æœåŠ¡ï¼ˆV3ï¼‰ï¼ˆå…¨é¢è‡ªå®šä¹‰ã€Œå®šä½æœåŠ¡ã€ä¸ã€Œåœ°å›¾ã€çš„åŠŸèƒ½ï¼‰configuration.ls.apple.com, gspe1-ssl.ls.apple.com, gspe12-ssl.ls.apple.com, gspe12-cn-ssl.ls.apple.com, gspe19-ssl.ls.apple.com, gspe19-cn-ssl.ls.apple.com, gspe35-ssl.ls.apple.com, gsp-ssl.ls.apple.com, direction2.is.autonavi.com, dispatcher.is.autonavi.com, rap.is.autonavi.com, sundew.ls.apple.com
# ğŸ—ºï¸ Network Defaults
ğŸ—ºï¸ ï£¿Maps.config.defaults.request = type=http-request, pattern=^https?:\/\/configuration\.ls\.apple\.com\/config\/defaults(\?.*)?$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
ğŸ—ºï¸ ï£¿Maps.config.defaults.response = type=http-response, pattern=^https?:\/\/configuration\.ls\.apple\.com\/config\/defaults(\?.*)?$, requires-body=1, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.response.js, argument=
# ğŸ“ Country Code
ğŸ“ Location.pep.gcc.response = type=http-response, pattern=^https?:\/\/gspe1-ssl\.ls\.apple\.com\/pep\/gcc, requires-body=1, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.response.js, argument=
# ğŸ—ºï¸ Announcements
ğŸ—ºï¸ ï£¿Maps.config.announcements.request = type=http-request, pattern=^https?:\/\/gspe35-ssl\.ls\.apple\.(com|cn)\/config\/announcements(\?.*)?$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
# ğŸ—ºï¸ Resource Manifest
ğŸ—ºï¸ ï£¿Maps.geo_manifest.dynamic.config.request = type=http-request, pattern=^https?:\/\/gspe35-ssl\.ls\.apple\.(com|cn)\/geo_manifest\/dynamic\/config(\?.*)?$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
# ğŸ—ºï¸ PlaceData Dispatcher
ğŸ—ºï¸ ï£¿Maps.dispatcher.arpc.request = type=http-request, pattern=^https?:\/\/gsp-ssl\.ls\.apple\.com\/dispatcher\.arpc$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
ğŸ—ºï¸ ï£¿Maps.dispatcher.request = type=http-request, pattern=^https?:\/\/dispatcher\.is\.autonavi\.com\/dispatcher$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
# ğŸ—ºï¸ Directions & ETA
ğŸ—ºï¸ ï£¿Maps.directions.arpc.request = type=http-request, pattern=^https?:\/\/gsp-ssl\.ls\.apple\.com\/directions\.arpc$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
ğŸ—ºï¸ ï£¿Maps.direction.request = type=http-request, pattern=^https?:\/\/direction2\.is\.autonavi\.com\/direction$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
# ğŸ—ºï¸ Traffic
ğŸ—ºï¸ ï£¿Maps.traffic.request = type=http-request, pattern=^https?:\/\/gspe12-ssl\.ls\.apple\.com\/traffic(\?.*)?$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
ğŸ—ºï¸ ï£¿Maps.traffic.request = type=http-request, pattern=^https?:\/\/gspe12-cn-ssl\.ls\.apple\.com\/traffic(\?.*)?$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
# ğŸ—ºï¸ RAP(Ratings and Photos) Submission
ğŸ—ºï¸ ï£¿Maps.feedback.submission.request = type=http-request, pattern=^https?:\/\/sundew\.ls\.apple\.com\/v1\/feedback\/submission\.arpc$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
ğŸ—ºï¸ ï£¿Maps.rap.request = type=http-request, pattern=^https?:\/\/rap\.is\.autonavi\.com\/rap$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
# ğŸ—ºï¸ RAP(Ratings and Photos) Status
ğŸ—ºï¸ ï£¿Maps.grp.st.request = type=http-request, pattern=^https?:\/\/sundew\.ls\.apple\.com\/grp\/st$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
ğŸ—ºï¸ ï£¿Maps.rapstatus.request = type=http-request, pattern=^https?:\/\/rap\.is\.autonavi\.com\/rapstatus$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
# ğŸ—ºï¸ UGC Log Discard
ğŸ—ºï¸ ï£¿Maps.log_message.request = type=http-request, pattern=^https?:\/\/sundew\.ls\.apple\.com\/v1\/log_message$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
# ğŸ—ºï¸ Tiles
ğŸ—ºï¸ ï£¿Maps.tile.vf.request = type=http-request, pattern=^https?:\/\/gspe19-ssl\.ls\.apple\.com\/tile\.vf(\?.*)?$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=
ğŸ—ºï¸ ï£¿Maps.tiles.request = type=http-request, pattern=^https?:\/\/gspe19-cn-ssl\.ls\.apple\.com\/tiles(\?.*)?$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Location.request.js, argument=

# Siri ä¸æœç´¢ï¼ˆV3ï¼‰ï¼ˆå…¨é¢è‡ªå®šä¹‰ã€ŒSiri ä¸æœç´¢ã€çš„åŠŸèƒ½ï¼‰api*.smoot.apple.com, api*.smoot.apple.cn
# Bag (iOS/macOS)
ğŸ” Siri.bag.request = type=http-request, pattern=^https?:\/\/api(.*)\.smoot\.apple\.(com|cn)\/bag(\?.*)?$, requires-body=0, timeout=5, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Siri.request.js, argument=
ğŸ” Siri.bag.response = type=http-response, pattern=^https?:\/\/api(.*)\.smoot\.apple\.(com|cn)\/bag(\?.*)?$, requires-body=1, timeout=10, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Siri.response.js, argument=
# Spotlight & Look Up Search (iOS/macOS)
ğŸ” Siri.search.request = type=http-request, pattern=^https?:\/\/api(.*)\.smoot\.apple\.(com|cn)\/search(\?.*)?$, requires-body=0, timeout=5, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Siri.request.js, argument=
ğŸ” Siri.search.response = type=http-response, pattern=^https?:\/\/api(.*)\.smoot\.apple\.(com|cn)\/search(\?.*)?$, requires-body=1, timeout=10, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Siri.response.js, argument=
# warm (unknown)
ğŸ” Siri.warm.request = type=http-request, pattern=^https?:\/\/api(.*)\.smoot\.apple\.(com|cn)\/warm(\?.*)?$, requires-body=0, debug=1, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Siri.request.js, argument=
# render (unknown)
ğŸ” Siri.render.request = type=http-request, pattern=^https?:\/\/api(.*)\.smoot\.apple\.(com|cn)\/render(\?.*)?$, requires-body=0, debug=1, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Siri.request.js, argument=
# Flight Search (iOS/macOS)
ğŸ” Siri.flight.request = type=http-request, pattern=^https?:\/\/api(.*)\.smoot\.apple\.(com|cn)\/flight(\?.*)?$, requires-body=0, debug=1, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Siri.request.js, argument=
# Siri Infomation Card (macOS)
ğŸ” Siri.card.request = type=http-request, pattern=^https?:\/\/api(.*)\.smoot\.apple\.(com|cn)\/card(\?.*)?$, requires-body=0, timeout=5, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Siri.request.js, argument=
ğŸ” Siri.card.response = type=http-response, pattern=^https?:\/\/api(.*)\.smoot\.apple\.(com|cn)\/card(\?.*)?$, requires-body=1, timeout=10, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/Siri.response.js, argument=

# TVï¼ˆV3ï¼‰ï¼ˆå…¨é¢è‡ªå®šä¹‰ã€Œï£¿TV appã€åŠŸèƒ½ï¼‰uts-api.itunes.apple.com, umc-tempo-api.apple.com
ğŸ“º ï£¿TV.uts.request = type=http-request, pattern=^https?:\/\/uts-api\.itunes\.apple\.com\/uts\/(v1|v2|v3)\/.*, requires-body=1, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/TV.request.js
ğŸ“º ï£¿TV.uts.response = type=http-response, pattern=^https?:\/\/uts-api\.itunes\.apple\.com\/uts\/(v1|v2|v3)\/.*, requires-body=1, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/TV.response.js
ğŸ“º ï£¿TV.umc.request = type=http-request, pattern=^https?:\/\/umc-tempo-api\.apple\.com\/(v1|v2|v3)\/.*, requires-body=1, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/TV.request.js

# Newsï¼ˆV2ï¼‰ï¼ˆ1. è‡ªå®šä¹‰è§£é” ï£¿News çš„åœ°åŒº æ³¨ï¼šè¯¥æ’ä»¶åŒ…å«ä»£ç†è§„åˆ™ï¼Œå®‰è£…è¿‡ç¨‹ä¸­éœ€è¦åŒ¹é…ä»£ç†ç­–ç•¥ç»„ä¸ºğŸ‡ºğŸ‡¸çº¿è·¯ï¼Œä½¿ç”¨è¿‡ç¨‹ä¸­ gateway.icloud.com ä¼šèµ°ä¸ ï£¿News ç›¸åŒçš„ä»£ç†çº¿è·¯ï¼‰news-edge.apple.com, news-todayconfig-edge.apple.com, news-events.apple.com, news-sports-events.apple.com, news-client.apple.com, news-client-search.apple.com
ğŸ“° ï£¿News.v1.configs.request = type=http-request, pattern=^https?:\/\/news(-todayconfig)?-edge\.apple\.com\/v1\/configs(\?.*)?$, requires-body=1, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/News.request.js
ğŸ“° ï£¿News.analyticseventsv2.async.request = type=http-request, pattern=^https?:\/\/news(-sports)?-events\.apple\.com\/analyticseventsv2\/async(\?.*)?$, requires-body=1, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/News.request.js
ğŸ“° ï£¿News.v1.search.request = type=http-request, pattern=^https?:\/\/news-client-search\.apple\.com\/v1\/search(\?.*)?$, requires-body=0, script-path=https://raw.githubusercontent.com/VirgilClyne/iRingo/main/js/News.request.js

# @Peng-YMï¼ˆæ›´å¤šè„šæœ¬ä¿¡æ¯è¯·è‡ªè¡Œåœ¨ https://github.com/Peng-YM/QuanX åŠ https://github.com/sub-store-org/Sub-Store ä¸­æŸ¥æ‰¾ï¼‰
# GitHub è®¿é—®ç§æœ‰ä»“åº“ï¼ˆå…è®¸å¼•ç”¨ Github ç§æœ‰ä»“åº“/ gist ä¸­çš„è®¢é˜…åˆ†æµï¼Œé‡å†™ï¼Œè„šæœ¬ç­‰é…ç½®æ–‡ä»¶ï¼‰ raw.githubusercontent.com, gist.githubusercontent.com
Github Private = type=http-request, requires-body=0, pattern=^https?:\/\/(raw|gist)\.githubusercontent.com, script-path=https://raw.githubusercontent.com/Peng-YM/QuanX/master/Rewrites/GithubPrivate/github-private-repo.js

# æ›¿æ¢æ”¯ä»˜å®å†…æ·˜ç¥¨ç¥¨è¯„åˆ†ä¸ºè±†ç“£è¯„åˆ† guide-acs.m.taobao.com
æ·˜ç¥¨ç¥¨è±†ç“£è¯„åˆ† = type=http-response, requires-body=1, pattern=^https:\/\/guide-acs\.m\.taobao\.com\/gw\/mtop\.film\.mtopshowapi\.getextendshowbyid, script-path=https://raw.githubusercontent.com/Peng-YM/QuanX/master/Rewrites/TaoPiaoPiao/taopiaopiao.js

# Sub-Store é«˜çº§è®¢é˜…ç®¡ç†å·¥å…· ï¼ˆå¸¦ ability å‚æ•°ç‰ˆæœ¬, å¯èƒ½ä¼šçˆ†å†…å­˜ï¼‰sub.store
Sub-Store Core = type=http-request,pattern=^https?:\/\/sub\.store\/((download)|api\/(preview|sync|(utils\/node-info))),script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/sub-store-1.min.js,requires-body=true,timeout=120,ability=http-client-policy
Sub-Store Simple = type=http-request,pattern=^https?:\/\/sub\.store,script-path=https://github.com/sub-store-org/Sub-Store/releases/latest/download/sub-store-0.min.js,requires-body=true

# @blackmatrix7ï¼ˆæ›´å¤šè„šæœ¬ä¿¡æ¯è¯·è‡ªè¡Œåœ¨ https://github.com/blackmatrix7/ios_rule_script ä¸­æŸ¥æ‰¾ï¼‰
# çŸ¥ä¹åŠ©æ‰‹ï¼ˆå»å¹¿å‘ŠåŠåŠŸèƒ½å¢å¼ºï¼‰118.89.204.198,103.41.167.237,2402:4e00:1200:ed00:0:9089:6dac:96b6,www.zhihu.com,api.zhihu.com,zhuanlan.zhihu.com,appcloud2.zhihu.com,m-cloud.zhihu.com,103.41.167.236,103.41.167.234,103.41.167.235,103.41.167.226
# è·å–ç”¨æˆ·ä¿¡æ¯ - éš”ç¦»ç”¨æˆ·æ•°æ®ï¼Œå¼€å¯æœ¬åœ°ä¼šå‘˜ç­‰
å¤„ç†ç”¨æˆ·ä¿¡æ¯ = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/people\/,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# å…³é”®è¯å±è”½ - è§£é”æœ¬åœ°çš„å…³é”®è¯å±è”½åŠŸèƒ½ï¼Œéœ€è¦å¼€å¯æœ¬åœ° VIP
è§£é”å…³é”®è¯å±è”½ = type=http-request,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/feed-root\/block,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# ä¼˜åŒ–è½¯ä»¶é…ç½® - ä¼˜åŒ–ä¸‹å‘çš„é…ç½®æ–‡ä»¶æ¥å®ç°æŸäº›æ•ˆæœ
ä¼˜åŒ–è½¯ä»¶é…ç½®1 = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/m-cloud\.zhihu\.com\/api\/cloud\/config\/all\?,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
ä¼˜åŒ–è½¯ä»¶é…ç½®2 = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/appcloud2\.zhihu\.com\/v\d+\/config,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# ç”¨æˆ·ä¿¡æ¯ - ä¿®æ”¹ç”¨æˆ·ç›å€¼
ä¿®æ”¹ç”¨æˆ·ç›å€¼ = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/user-credit\/basis,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# å…³æ³¨é¡µ - å†…å®¹ä¼˜åŒ–åŠå±è”½è½¬å‘çš„é»‘åå•ç”¨æˆ·æƒ³æ³•
å…³æ³¨åˆ—è¡¨ä¼˜åŒ– = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/moments_v3\?,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# æ¨èé¡µ - ç§»é™¤é»‘åå•ç”¨æˆ·å‘å¸ƒçš„æ–‡ç« ã€å»é™¤å¹¿å‘Šï¼ŒåŠè‡ªå®šä¹‰ä¸€äº›å±è”½é¡¹ç›®
æ¨èé¡µä¼˜åŒ– = type=http-response,requires-body=1,max-size=0,pattern=^https:\/\/api\.zhihu\.com\/topstory\/recommend,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# é»‘åå•é¡µ - åŒæ­¥é»‘åå•æ•°æ®
åŒæ­¥é»‘åå• = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/settings\/blocked_users,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# é—®é¢˜çš„å›ç­”åˆ—è¡¨ - ç§»é™¤é»‘åå•ç”¨æˆ·çš„å›ç­”ã€å»é™¤å¹¿å‘Š
å›ç­”åˆ—è¡¨ä¼˜åŒ– = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/(v4\/)?questions\/\d+,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# å›ç­”ä¿¡æ¯æµ - ç§»é™¤é»‘åå•ç”¨æˆ·çš„å›ç­”ã€å»é™¤å¹¿å‘Š
å›ç­”ä¿¡æ¯æµä¼˜åŒ– = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/next-(data|bff|render),script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# å›ç­”é¡µåº•éƒ¨è¯„è®ºæ‘˜è¦ - ç§»é™¤é»‘åå•ç”¨æˆ·å‘è¡¨çš„è¯„è®º
è¯„è®ºæ‘˜è¦ä¼˜åŒ– = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/www\.zhihu\.com\/api\/v4\/comment_v5\/answers\/\d+\/abstract_comment\?,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# è¯„è®ºé¡µåŠå­é¡µé¢ - å»é™¤é»‘åå•ç”¨æˆ·å‘è¡¨çš„è¯„è®º
è¯„è®ºä¼˜åŒ– = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/(comment_v5\/)?(answers|comments?|articles|pins)\/\d+\/(root_|child_)?comments?,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# æ¶ˆæ¯é¡µ - æŠ˜å å®˜æ–¹æ¶ˆæ¯ã€å±è”½è¥é”€æ¶ˆæ¯
æ¶ˆæ¯ä¼˜åŒ– = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/notifications\/v3\/(message|timeline\/entry\/system_message),script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# å›ç­”é¡µ - å†…å®¹ä¼˜åŒ–ï¼Œä»˜è´¹ã€è¥é”€ã€æ¨å¹¿å†…å®¹æ–‡é¦–æé†’
å›ç­”å†…å®¹ä¼˜åŒ– = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/www\.zhihu\.com\/appview\/v2\/answer\/.*(entry=(?!(preload-topstory|preload-search|preload-subscription)))?,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# å›ç­”é¡µ - å±è”½ä¸‹ç¿»å‡ºç°çš„é»‘åå•ç”¨æˆ·çš„å›ç­”
å›ç­”ç¿»é¡µä¼˜åŒ– = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/next\?,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# æ–‡ç« é¡µ - å»é™¤åº•éƒ¨
æ–‡ç« ä¼˜åŒ– = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/www\.zhihu\.com\/api\/v\d\/articles\/\d+\/recommendation\?,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# çƒ­æ¦œé¡µ - å»é™¤
çƒ­æ¦œä¼˜åŒ– = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/topstory\/hot-lists(\?|\/),script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js
# æœç´¢é¡µ - å»é™¤é¢„ç½®
é¢„ç½®å…³é”®è¯ä¼˜åŒ– = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/search\/preset_words\?,script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js

# @yichahucha ï¼ˆæ›´å¤šè„šæœ¬ä¿¡æ¯è¯·è‡ªè¡Œåœ¨ https://github.com/yichahucha/surge ä¸­æŸ¥æ‰¾ï¼‰
# Netflix æ˜¾ç¤ºè¯„åˆ† ios-*.prod.ftl.netflix.com,ios.prod.ftl.netflix.com
nf_rating.js = type=http-request,pattern=^https?:\/\/ios(-.*)?\.prod\.ftl\.netflix\.com\/iosui\/user/.+path=%5B%22videos%22%2C%\d+%22%2C%22summary%22%5D,script-path=https://raw.githubusercontent.com/yichahucha/surge/master/nf_rating.js
nf_rating.js = type=http-response,requires-body=1,pattern=^https?:\/\/ios(-.*)?\.prod\.ftl\.netflix\.com\/iosui\/user/.+path=%5B%22videos%22%2C%\d+%22%2C%22summary%22%5D,script-path=https://raw.githubusercontent.com/yichahucha/surge/master/nf_rating.js

# å¾®åšå»å¹¿å‘Š api.weibo.cn, mapi.weibo.com, *.uve.weibo.com
http-response ^https?://(sdk|wb)app\.uve\.weibo\.com(/interface/sdk/sdkad.php|/wbapplua/wbpullad.lua) requires-body=1,script-path=https://raw.githubusercontent.com/yichahucha/surge/master/wb_launch.js
http-response ^https?://m?api\.weibo\.c(n|om)/2/(messageflow/notice|search/(container_timeline|finder)|statuses/(container_timeline_hot|container_timeline_unread|container_timeline|unread|extend|positives/get|(friends|video)(/|_)(mix)?timeline)|stories/(video_stream|home_list)|(groups|fangle)/timeline|profile/statuses|comments/build_comments|photo/recommend_list|service/picfeed|searchall|cardlist|page|!/(photos/pic_recommend_status|live/media_homelist)|video/tiny_stream_video_list|photo/info|remind/unread_count) requires-body=1,max-size=-1,script-path=https://raw.githubusercontent.com/yichahucha/surge/master/wb_ad.js

# @app2smileï¼ˆæ›´å¤šè„šæœ¬ä¿¡æ¯è¯·è‡ªè¡Œåœ¨ https://github.com/app2smile/rules ä¸­æŸ¥æ‰¾ï¼‰
# Spotify Proï¼ˆ1. éƒ¨åˆ†è§£é” premium éœ€ iOS 15+ï¼ŒéŸ³è´¨ä¸èƒ½è®¾ç½®ä¸ºè¶…é«˜ 2. æœç´¢ç•Œé¢æ­Œå•/æ­Œæ›²å¯ä»¥éšæ„åˆ‡æ¢å®Œå…¨æ’­æ”¾ 3. éŸ³ä¹åº“å·²ç‚¹èµæ­Œæ›²éšæ„åˆ‡æ¢å®Œå…¨æ’­æ”¾ï¼‰spclient.wg.spotify.com
Spotify-json = type=http-request,pattern=^https:\/\/spclient\.wg\.spotify\.com\/(artistview\/v1\/artist|album-entity-view\/v2\/album)\/,requires-body=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-json.js
Spotify-proto = type=http-response,pattern=^https:\/\/spclient\.wg\.spotify\.com\/(bootstrap\/v1\/bootstrap|user-customization-service\/v1\/customize)$,requires-body=1,binary-body-mode=1,max-size=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/spotify-proto.js,script-update-interval=0

# ç™¾åº¦è´´å§å»å¹¿å‘Šï¼ˆiOS 15+ã€å¼€å±å¹¿å‘Šã€æ¨èã€å§å†…å¸–å­åˆ—è¡¨çš„ç›´æ’­åŠå¹¿å‘Šã€è¯¦æƒ…é¡µç›´æ’­/å…³è”å•†å“/å¹¿å‘Šã€çœ‹å›¾æ¨¡å¼å¹¿å‘Šã€é¦–é¡µå’Œå¸–å­è¯¦æƒ…é¡µå³ä¸‹è§’æ‚¬æµ®å¹¿å‘Šã€éƒ¨åˆ†å§å†…çš„ç½®é¡¶/æœ€æ–°ä¸­é—´çš„å¹¿å‘Š/head å›¾ç‰‡å¹¿å‘Š/head ç›´æ’­ï¼‰ï¼ˆåŠ è½½æœ¬é‡å†™å‰ï¼Œé¡»åŒæ—¶åŠ è½½å¯¹åº”çš„è´´å§åˆ†æµï¼Œå¦åˆ™ä¸èƒ½å®Œå…¨å»å¹¿å‘Šï¼‰tiebac.baidu.com
è´´å§-json = type=http-response,pattern=^http(s:\/\/tiebac|:\/\/c\.tieba)\.baidu\.com\/(c\/(s\/sync|f\/(frs\/(page|threadlist|generalTabList)|pb\/(pic)?page|excellent\/personalized))$|tiebaads\/commonbatch\?),requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/tieba-json.js,script-update-interval=0
è´´å§-proto = type=http-response,pattern=^http(s:\/\/tiebac|:\/\/c\.tieba)\.baidu\.com\/c\/f\/(frs\/(page|threadlist|generalTabList)|pb\/page|excellent\/personalized)\?cmd,requires-body=1,binary-body-mode=1,max-size=0,script-path=https://raw.githubusercontent.com/app2smile/rules/master/js/tieba-proto.js,script-update-interval=0

# @zZPigletï¼ˆæ›´å¤šè„šæœ¬ä¿¡æ¯è¯·è‡ªè¡Œåœ¨ https://github.com/zZPiglet/Task/tree/master ä¸­æŸ¥æ‰¾ï¼‰
# è·³è¿‡ä¸­é—´ç•Œé¢ï¼Œæ”¯ä»˜å®é“¾æ¥å’Œè¢«å°ç¦æ·˜å®é“¾æ¥è¿›è¡Œé€šçŸ¥å¼¹çª—è·³è½¬ï¼Œåœ¨å¾®ä¿¡ä¸­ç”¨å¿«ç…§æ˜¾ç¤ºè¢«å°ç¦çš„é“¾æ¥ï¼ˆå¯é€‰ï¼‰ï¼Œåœ¨å¾®ä¿¡ä¸­è¿›è¡Œå¼ºåˆ¶é‡å®šå‘ï¼ˆå¯é€‰ï¼‰ï¼ˆç¾¤èŠ/æ‰«ç å‡å¯ä½¿ç”¨ï¼Œå¯é€‰é¡¹å¯åœ¨è„šæœ¬2ã€3è¡Œæ›´æ”¹ï¼Œä¹Ÿå¯åœ¨ BoxJs ä¸­æ›´æ”¹ï¼‰security.wechat.com, weixin110.qq.com
è§£é™¤å¾®ä¿¡é“¾æ¥é™åˆ¶ = type=http-response,pattern=^https\:\/\/(weixin110\.qq|security.wechat)\.com\/cgi-bin\/mmspamsupport-bin\/newredirectconfirmcgi\?,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/zZPiglet/Task/master/asset/UnblockURLinWeChat.js

# è·³è¿‡é‡å®šå‘ç•Œé¢ links.jianshu.com, www.jianshu.com, link.zhihu.com, weibo.cn, sinaurl.cn, home.115.com, shop.sc.weibo.com
# ç®€ä¹¦
ç®€ä¹¦ = type=http-request,pattern=^https:\/\/links\.jianshu\.com\/go\?to=,script-path=https://raw.githubusercontent.com/zZPiglet/Task/master/asset/noredirect.js
ç®€ä¹¦2 = type=http-request,pattern=^https:\/\/www\.jianshu\.com\/go-wild\?ac=\d&url=,script-path=https://raw.githubusercontent.com/zZPiglet/Task/master/asset/noredirect.js
# çŸ¥ä¹
çŸ¥ä¹ = type=http-request,pattern=^https:\/\/link\.zhihu\.com\/\?target=,script-path=https://raw.githubusercontent.com/zZPiglet/Task/master/asset/noredirect.js
# å¾®åš
å¾®åš = type=http-request,pattern=^https?:\/\/weibo\.cn\/sinaurl\?(.*&)?(u|toasturl|goto)=,script-path=https://raw.githubusercontent.com/zZPiglet/Task/master/asset/noredirect.js
å¾®åš2 = type=http-request,pattern=^https:\/\/shop\.sc\.weibo\.com\/h5\/jump\/error\?(.*&)?url=(.*),script-path=https://raw.githubusercontent.com/zZPiglet/Task/master/asset/noredirect.js
å¾®åš3 = type=http-response,pattern=^https?:\/\/(sinaurl|t)\.cn\/,script-path=https://raw.githubusercontent.com/zZPiglet/Task/master/asset/noredirect.js

# @chavyleungï¼ˆæ›´å¤šè„šæœ¬ä¿¡æ¯è¯·è‡ªè¡Œåœ¨ https://github.com/chavyleung/scripts ä¸­æŸ¥æ‰¾ï¼‰
# BoxJSï¼ˆæµè§ˆå™¨è®¿é—®ï¼šhttps://boxjs.comï¼‰boxjs.com, boxjs.net, *.boxjs.com, *.boxjs.net
BoxJs = type=http-request,pattern=^https?:\/\/(.+\.)?boxjs\.(com|net),script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/box/chavy.boxjs.js, requires-body=true, timeout=120

# @Neurogramï¼ˆæ›´å¤šè„šæœ¬ä¿¡æ¯è¯·è‡ªè¡Œåœ¨ https://github.com/Neurogram-R ä¸­æŸ¥æ‰¾ï¼‰
# Dualsubï¼ˆä¸º Disney+, Star+, Max, Hulu, Netflix, Paramount+, Prime Video, YouTube ç­‰åŠ ä¸Šå­—å¹•ï¼‰*.media.dssott.com, *.media.starott.com, *.api.hbo.com, *.hbomaxcdn.com, *.huluim.com, *.nflxvideo.net, *.cbsaavideo.com, *.cbsivideo.com, *.cloudfront.net, *.akamaihd.net, *.avi-cdn.net, *.youtube.com
Dualsub = type=http-response,pattern=^http.+(media.(dss|star)ott|manifests.v2.api.hbo|hbomaxcdn|nflxvideo|cbs(aa|i)video|cloudfront|akamaihd|avi-cdn|huluim|youtube).(com|net)\/(.+\.vtt($|\?m=\d+)|.+-all-.+\.m3u8.*|hls\.m3u8.+|\?o=\d+&v=\d+&e=.+|\w+\/2\$.+\/[a-zA-Z0-9-]+\.m3u8|api\/timedtext.+),requires-body=1,max-size=0,timeout=30,script-path=https://raw.githubusercontent.com/Neurogram-R/Surge/master/Dualsub.js
Dualsub-setting = type=http-request,pattern=^http.+(setting|general).(media.dssott|hbomaxcdn|nflxvideo|youtube|cbsivideo|cloudfront|huluim).(com|net)\/\?action=(g|s)et,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/Neurogram-R/Surge/master/Dualsub.js

# Script Hub: é‡å†™ & è§„åˆ™é›†è½¬æ¢ï¼ˆè®¿é—®ï¼šhttps://script.hubï¼‰script.hub, *.script.hub
å‰ç«¯ = type=http-request,pattern=^https?:\/\/script\.hub\/($|edit\/|reload), requires-body=0, max-size=0,script-path=https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/script-hub.js, timeout=120
QX è½¬æ¢ Surge = type=http-request, pattern=^https?:\/\/script\.hub\/file\/_start_\/.+type=qx-rewrite, requires-body=0, max-size=0, script-path=https://github.com/Script-Hub-Org/Script-Hub/raw/main/QX-Rewrite-Parser.js, timeout=120
Loon è½¬æ¢ Surge = type=http-request, pattern=^https?:\/\/script\.hub\/file\/_start_\/.+type=loon-plugin, requires-body=0, max-size=0, script-path=https://github.com/Script-Hub-Org/Script-Hub/raw/main/Loon-Rewrite-Parser.js, timeout=120
Surge æ¨¡å—æ§åˆ¶å™¨ = type=http-request, pattern=^https?:\/\/script\.hub\/file\/_start_\/.+type=surge-module, requires-body=0, max-size=0, script-path=https://github.com/Script-Hub-Org/Script-Hub/raw/main/Surge-Rewrite-Parser.js, timeout=120
è§„åˆ™é›†è½¬æ¢ = type=http-request, pattern=^https?:\/\/script\.hub\/file\/_start_\/.+type=rule-set, requires-body=0, max-size=0, script-path=https://github.com/Script-Hub-Org/Script-Hub/raw/main/rule-parser.js, timeout=120
è„šæœ¬è½¬æ¢ = type=http-request, pattern=^https?:\/\/script\.hub\/convert\/, requires-body=0, max-size=0, script-path=https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/script-converter.js, timeout=120

# @
# å“”å“©å“”å“© manga.bilibili.com, api.live.bilibili.com, api.vc.bilibili.com, app.bilibili.com, app.biliapi.net, api.bilibili.com, api.biliapi.net, grpc.biliapi.net
# å¼€å±å¹¿å‘Š | æ¨èé¡µ banner å’Œå¹¿å‘Š | æˆ‘çš„é¡µé¢ | 1080P | çƒ­æœ | æ ‡ç­¾æ  | ä¸‹å‘çš®è‚¤
bili-jsons = type=http-response,pattern=^https?:\/\/app\.bilibili\.com\/x\/(v2\/(splash\/(list|show)|feed\/index|account\/(mine(\/ipad)?|myinfo\?)|search\/square)|resource\/show\/(tab\/v2|skin\?)),requires-body=1,script-update-interval=-1,script-path=https://github.com/Keywos/rule/raw/main/JS/bjson.js

# å¾®åšå›½é™…ç‰ˆ *api.weibo.cn, sdkapp.uve.weibo.com
# è¶‹åŠ¿é¡µ | å¼€å±å¹¿å‘Š | ç”¨æˆ·ä¸­å¿ƒ | çƒ­æœç½®é¡¶ | æˆ‘çš„é¡µé¢ å°Šäº«ä¸“å± | ç€‘å¸ƒæµå»å¹¿å‘Š
http-response ^https?:\/\/weibointl\.api\.weibo\.cn\/portal\.php\?(ct=(feed&a=trends|user&a=get_searching_info)|a=(get_coopen_ads|user_center|search_topic|open_app&auth|icon_center)) requires-body=1,script-path=https://raw.githubusercontent.com/Keywos/rule/main/JS/weibous.js
http-response ^https?:\/\/api\.weibo\.cn\/\d\/statuses\/.*timeline requires-body=1,script-path=https://raw.githubusercontent.com/Keywos/rule/main/JS/weibous.js
http-response ^https?:\/\/sdkapp\.uve\.weibo\.com\/interface\/sdk\/sdkad\.php requires-body=1,script-path=https://raw.githubusercontent.com/Keywos/rule/main/JS/weibous.js

# èœé¸Ÿå‡€åŒ– cn-acs.m.cainiao.com, guide-acs.m.taobao.com
èœé¸Ÿæ·˜å® = type=http-response,pattern=^https?:\/\/(cn-acs\.m\.cainiao|guide-acs\.m\.taobao)\.com\/gw\/mtop\.cainiao\.guoguo\.nbnetflow\.ads\.m?show,requires-body=1,max-size=0,script-update-interval=-1,script-path=https://raw.githubusercontent.com/Keywos/rule/main/JS/cainiao.js
èœé¸Ÿ cn = type=http-response,pattern=^https?:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.cainiao\.nbpresentation\.(homepage\.merge|pickup\.empty\.page|protocol\.homepage)\.get\.cn,requires-body=1,max-size=0,script-update-interval=-1,script-path=https://raw.githubusercontent.com/Keywos/rule/main/JS/cainiao.js

# ç™¾åº¦è¾“å…¥æ³• imeres.baidu.com, mbd.baidu.com, mime.baidu.com, h2tcbox.baidu.com
ç™¾åº¦è¾“å…¥æ³• = type=http-response,pattern=^https?:\/\/mime\.baidu\.com\/(imrobot\/v1\/pub\/relation\/get_robot_list|v5\/custom_page\/(layout|getdata)),requires-body=1,max-size=0,script-update-interval=-1,script-path=https://raw.githubusercontent.com/Keywos/rule/main/JS/bdsrf.js

# @
# ä»€ä¹ˆå€¼å¾—ä¹°å»å¹¿å‘Š zhiyou.smzdm.com, app-api.smzdm.com, homepage-api.smzdm.com, haojia-api.smzdm.com, haojia.m.smzdm.com, baike-api.smzdm.com, s-api.smzdm.com, zhiyou.m.smzdm.com
è·å– cookie = script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_daily.js,type=http-request,requires-body=false,pattern=^https?:\/\/zhiyou\.smzdm\.com\/user\/?$
å¼€å± = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/app-api\.smzdm\.com\/util\/loading,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
é¦–é¡µ = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/homepage-api\.smzdm\.com\/v3\/home,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
å¥½ä»· = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/haojia-api\.smzdm\.com\/home\/list,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
å¥½ä»·è¯¦æƒ…é¡µ = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/haojia\.m\.smzdm\.com\/detail_modul\/article_releated_modul,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
ç™¾ç§‘ = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/baike-api\.smzdm\.com\/home_v3\/list,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
æœç´¢ç»“æœ = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/s-api\.smzdm\.com\/sou\/list_v10,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
æœç´¢æ ‡ç­¾ = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/s-api\.smzdm\.com\/sou\/filter\/tags\/hot_tags,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js
å€¼ä¼šå‘˜æƒç›Šä¸­å¿ƒ banner = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/zhiyou\.m\.smzdm\.com\/user\/vip\/ajax_get_banner,script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/smzdm/smzdm_remove_ads.js

# @
# å»é™¤ Youtube å¹¿å‘Šï¼ˆiOS >= 15ï¼‰*.googlevideo.com, youtubei.googleapis.com
Youtube.request = type=http-request,pattern=^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next|player|reel\/reel_watch_sequence)\?,requires-body=1,max-size=-1,binary-body-mode=1,script-path=https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/dist/youtube.request.beta.js
Youtube.response = type=http-response,pattern=^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next|player|search|reel\/reel_watch_sequence|guide|account\/get_setting)\?,requires-body=1,max-size=-1,binary-body-mode=1,script-path=https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/dist/youtube.response.beta.js

# æ‚ä¸ƒæ‚å…«
# æ˜¾ç¤ºäº¬ä¸œå†å²ä»·æ ¼ api.m.jd.com
http-response ^https?:\/\/api\.m\.jd\.com\/client\.action\?functionId=(wareBusiness|serverConfig|basicConfig) requires-body=1,script-path= https://raw.githubusercontent.com/zwf234/rules/master/js/jd_price.js

# è§£é” Emby Premiere mb3admin.com
Emby Premiere = type=http-response,pattern=^https?:\/\/mb3admin.com\/admin\/service\/registration\/validateDevice,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/rartv/SurgeScript/main/EmbyPremiere/EmbyPremiere.js

[MITM]
hostname = guide-acs.m.taobao.com, ios-*.prod.ftl.netflix.com,ios.prod.ftl.netflix.com, api.weibo.cn, mapi.weibo.com, *.uve.weibo.com, ap?.bili*i.com, ap?.bili*i.net, mp.weixin.qq.com
# ä¸å¯ MitM ä¹Ÿä¸åº”è¯¥è¢«æ‰“æ–­è¿æ¥çš„åŸŸå
hostname = %INSERT% -gateway.icloud.com, -gateway.icloud.com.cn, -weather-data.apple.com, -buy.itunes.apple.com, boxjs.com, boxjs.net, *.boxjs.com, *.boxjs.net
hostname = %APPEND% configuration.ls.apple.com, gspe1-ssl.ls.apple.com, gspe12-ssl.ls.apple.com, gspe12-cn-ssl.ls.apple.com, gspe19-ssl.ls.apple.com, gspe19-cn-ssl.ls.apple.com, gspe35-ssl.ls.apple.com, gsp-ssl.ls.apple.com, direction2.is.autonavi.com, dispatcher.is.autonavi.com, rap.is.autonavi.com, sundew.ls.apple.com, api*.smoot.apple.com, api*.smoot.apple.cn, uts-api.itunes.apple.com, umc-tempo-api.apple.com, news-edge.apple.com, news-todayconfig-edge.apple.com, news-events.apple.com, news-sports-events.apple.com, news-client.apple.com, news-client-search.apple.com, raw.githubusercontent.com, gist.githubusercontent.com, sub.store, 118.89.204.198,103.41.167.237,2402:4e00:1200:ed00:0:9089:6dac:96b6,www.zhihu.com,api.zhihu.com,zhuanlan.zhihu.com,appcloud2.zhihu.com,m-cloud.zhihu.com,103.41.167.236,103.41.167.234,103.41.167.235,103.41.167.226, spclient.wg.spotify.com, tiebac.baidu.com, security.wechat.com, weixin110.qq.com, links.jianshu.com, www.jianshu.com, link.zhihu.com, weibo.cn, sinaurl.cn, home.115.com, shop.sc.weibo.com, *.media.dssott.com, *.media.starott.com, *.api.hbo.com, *.hbomaxcdn.com, *.huluim.com, *.nflxvideo.net, *.cbsaavideo.com, *.cbsivideo.com, *.cloudfront.net, *.akamaihd.net, *.avi-cdn.net, *.youtube.com, www.xmind.cn, www.xmind.net, www.xmind.app, gateway.caixin.com, ipadcms.caixin.com, vira.llsapp.com, app-live.planefinder.net, account.wps.cn, *account.wps.com, testflight.apple.com, www.bing.com, api.m.jd.com, manga.bilibili.com, api.live.bilibili.com, api.vc.bilibili.com, app.bilibili.com, app.biliapi.net, api.bilibili.com, api.biliapi.net, grpc.biliapi.net, *api.weibo.cn, sdkapp.uve.weibo.com, m.baidu.com,www.baidu.com, cn-acs.m.cainiao.com, guide-acs.m.taobao.com, imeres.baidu.com, mbd.baidu.com, mime.baidu.com, h2tcbox.baidu.com, zhiyou.smzdm.com, app-api.smzdm.com, homepage-api.smzdm.com, haojia-api.smzdm.com, haojia.m.smzdm.com, baike-api.smzdm.com, s-api.smzdm.com, zhiyou.m.smzdm.com, *.googlevideo.com, youtubei.googleapis.com, script.hub, *.script.hub, mb3admin.com

Scripts:
networkcheck.js// æœ€åæ›´æ–°ï¼š23.10.09
let prfl = {
    icons: "globe.asia.australia.fill",
    icolor: "#6699FF",
    hideIP: false,
    dptrTmot: 1e3,
    arvlTmot: 2e3,
}

function ai(e) {
    return String['fromCodePoint'](...e['toUpperCase']()['split']('')['map'](e => 0x1f1a5 + e['charCodeAt']()));
}

function bi(m, n) {
    var o = new RegExp('[\u4E00-\u9FA5]+');
    var p = '';
    if (m['match'](/\ or\ /g)) {
        m = '';
    }
    if (!o['test'](m)) {
        m = '';
    }
    if (!o['test'](n)) {
        n = '';
    }
    if (m == n) {
        m = '';
    }
    if (m && n) {
        p = m + ' ' + n;
    } else if (m) {
        p = m;
    } else if (n) {
        p = n;
    }
    return p;
}

function ci(m) {
    return 'è‡ªæ²»ç³»ç»Ÿå·ï¼š' + m['match'](/(?<=^.{2})\S\d+/g)[0];
}

function di(m, n) {
    if (m == n || m == '') {
        return n;
    } else {
        return m + ' ' + n;
    }
}

function ei(m) {
    if (m == 'ä¸­åæ°‘å›½' || m == 'ä¸­åæ°‘å›½') {
        return 'å°æ¹¾';
    } else {
        return m;
    }
}

function fi(m) {
    var n = '',
        o = gi(),
        p = hi();
    for (var q = 0; q < m['length']; q++) {
        if (m['charCodeAt'](q) > 10000 && p['indexOf'](m['charAt'](q)) != -1) n += o['charAt'](p['indexOf'](m['charAt'](q)));
        else n += m['charAt'](q);
    }
    return n;
}

function gi() {
    return 'çš‘è”¼ç¢çˆ±ç¿±è¢„å¥¥åç½¢æ‘†è´¥é¢åŠç»Šå¸®ç»‘é•‘è°¤å‰¥é¥±å®æŠ¥é²è¾ˆè´é’¡ç‹ˆå¤‡æƒ«ç»·ç¬”æ¯•æ¯™é—­è¾¹ç¼–è´¬å˜è¾©è¾«é³–ç˜ªæ¿’æ»¨å®¾æ‘ˆé¥¼æ‹¨é’µé“‚é©³åœè¡¥å‚èš•æ®‹æƒ­æƒ¨ç¿è‹èˆ±ä»“æ²§å•ä¾§å†Œæµ‹å±‚è¯§æ€æºè‰é¦‹è°—ç¼ é“²äº§é˜é¢¤åœºå°é•¿å¿è‚ å‚ç•…é’è½¦å½»å°˜é™ˆè¡¬æ’‘ç§°æƒ©è¯šéª‹ç—´è¿Ÿé©°è€»é½¿ç‚½å†²è™«å® ç•´è¸Œç­¹ç»¸ä¸‘æ©±å¨é”„é›ç¡€å‚¨è§¦å¤„ä¼ ç–®é—¯åˆ›é”¤çº¯ç»°è¾è¯èµèªè‘±å›±ä»ä¸›å‡‘çªœé”™è¾¾å¸¦è´·æ‹…å•éƒ¸æ¸èƒ†æƒ®è¯å¼¹å½“æŒ¡å…šè¡æ¡£æ£å²›ç¥·å¯¼ç›—ç¯é‚“æ•Œæ¶¤é€’ç¼”ç‚¹å«ç”µæ·€é’“è°ƒè¿­è°å é’‰é¡¶é”­è®¢ä¸œåŠ¨æ ‹å†»æ–—çŠŠç‹¬è¯»èµŒé•€é”»æ–­ç¼å…‘é˜Ÿå¯¹å¨é¡¿é’å¤ºé¹…é¢è®¹æ¶é¥¿å„¿å°”é¥µè´°å‘ç½šé˜€ççŸ¾é’’çƒ¦èŒƒè´©é¥­è®¿çººé£åºŸè´¹çº·åŸå¥‹æ„¤ç²ªä¸°æ«é”‹é£ç–¯å†¯ç¼è®½å‡¤è‚¤è¾æŠšè¾…èµ‹å¤è´Ÿè®£å¦‡ç¼šè¯¥é’™ç›–å¹²èµ¶ç§†èµ£å†ˆåˆšé’¢çº²å²—çš‹é•æé¸½é˜é“¬ä¸ªç»™é¾šå®«å·©è´¡é’©æ²Ÿæ„è´­å¤Ÿè›Šé¡¾å‰å…³è§‚é¦†æƒ¯è´¯å¹¿è§„ç¡…å½’é¾Ÿé—ºè½¨è¯¡æŸœè´µåˆ½è¾Šæ»šé”…å›½è¿‡éª‡éŸ©æ±‰é˜‚é¹¤è´ºæ¨ªè½°é¸¿çº¢åå£¶æŠ¤æ²ªæˆ·å“—åç”»åˆ’è¯æ€€åæ¬¢ç¯è¿˜ç¼“æ¢å”¤ç—ªç„•æ¶£é»„è°æŒ¥è¾‰æ¯è´¿ç§½ä¼šçƒ©æ±‡è®³è¯²ç»˜è¤æµ‘ä¼™è·è´§ç¥¸å‡»æœºç§¯é¥¥è®¥é¸¡ç»©ç¼‰æè¾‘çº§æŒ¤å‡ è“Ÿå‰‚æµè®¡è®°é™…ç»§çºªå¤¹èšé¢Šè´¾é’¾ä»·é©¾æ­¼ç›‘åšç¬ºé—´è‰°ç¼„èŒ§æ£€ç¢±ç¡·æ‹£æ¡ç®€ä¿­å‡èæ§›é‰´è·µè´±è§é”®èˆ°å‰‘é¥¯æ¸æº…æ¶§æµ†è’‹æ¡¨å¥–è®²é…±èƒ¶æµ‡éª„å¨‡æ…é“°çŸ«ä¾¥è„šé¥ºç¼´ç»è½¿è¾ƒç§¸é˜¶èŠ‚èŒæƒŠç»é¢ˆé™é•œå¾„ç—‰ç«å‡€çº å©æ—§é©¹ä¸¾æ®é”¯æƒ§å‰§é¹ƒç»¢æ°æ´ç»“è¯«å±Šç´§é”¦ä»…è°¨è¿›æ™‹çƒ¬å°½åŠ²è†è§‰å†³è¯€ç»é’§å†›éªå¼€å‡¯é¢—å£³è¯¾å¦æ³æŠ åº“è£¤å¤¸å—ä¾©å®½çŸ¿æ—·å†µäºå²¿çª¥é¦ˆæºƒæ‰©é˜”èœ¡è…Šè±æ¥èµ–è“æ æ‹¦ç¯®é˜‘å…°æ¾œè°°æ½è§ˆæ‡’ç¼†çƒ‚æ»¥æåŠ³æ¶ä¹é•­å’ç±»æ³ªç¯±ç¦»é‡Œé²¤ç¤¼ä¸½å‰åŠ±ç ¾å†æ²¥éš¶ä¿©è”è²è¿é•°æ€œæ¶Ÿå¸˜æ•›è„¸é“¾æ‹ç‚¼ç»ƒç²®å‡‰ä¸¤è¾†è°…ç–—è¾½é•£çŒä¸´é‚»é³å‡›èµé¾„é“ƒå‡Œçµå²­é¢†é¦åˆ˜é¾™è‹å’™ç¬¼å„æ‹¢é™‡æ¥¼å¨„æ‚ç¯“èŠ¦å¢é¢…åºç‚‰æ³å¤è™é²èµ‚ç¦„å½•é™†é©´å•é“ä¾£å±¡ç¼•è™‘æ»¤ç»¿å³¦æŒ›å­ªæ»¦ä¹±æŠ¡è½®ä¼¦ä»‘æ²¦çº¶è®ºèç½—é€»é”£ç®©éª¡éª†ç»œå¦ˆç›ç èš‚é©¬éª‚å—ä¹°éº¦å–è¿ˆè„‰ç’é¦’è›®æ»¡è°©çŒ«é”šé“†è´¸ä¹ˆéœ‰æ²¡é•é—¨é—·ä»¬é”°æ¢¦è°œå¼¥è§…ç»µç¼…åº™ç­æ‚¯é—½é¸£é“­è°¬è°‹äº©é’ çº³éš¾æŒ è„‘æ¼é—¹é¦è…»æ’µæ»é…¿é¸Ÿè‚å•®é•Šé•æŸ ç‹å®æ‹§æ³é’®çº½è„“æµ“å†œç–Ÿè¯ºæ¬§é¸¥æ®´å‘•æ²¤ç›˜åºå›½çˆ±èµ”å–·é¹éª—é£˜é¢‘è´«è‹¹å‡­è¯„æ³¼é¢‡æ‰‘é“ºæœ´è°±è„é½éª‘å²‚å¯æ°”å¼ƒè®«ç‰µæ‰¦é’é“…è¿ç­¾è°¦é’±é’³æ½œæµ…è°´å ‘æªå‘›å¢™è”·å¼ºæŠ¢é”¹æ¡¥ä¹”ä¾¨ç¿˜çªçªƒé’¦äº²è½»æ°¢å€¾é¡·è¯·åº†ç¼ç©·è¶‹åŒºèº¯é©±é¾‹é¢§æƒåŠå´é¹Šè®©é¥¶æ‰°ç»•çƒ­éŸ§è®¤çº«è£ç»’è½¯é”é—°æ¶¦æ´’è¨é³ƒèµ›ä¼ä¸§éªšæ‰«æ¶©æ€çº±ç­›æ™’é—ªé™•èµ¡ç¼®ä¼¤èµçƒ§ç»èµŠæ‘„æ…‘è®¾ç»…å®¡å©¶è‚¾æ¸—å£°ç»³èƒœåœ£å¸ˆç‹®æ¹¿è¯—å°¸æ—¶èš€å®è¯†é©¶åŠ¿é‡Šé¥°è§†è¯•å¯¿å…½æ¢è¾“ä¹¦èµå±æœ¯æ ‘ç«–æ•°å¸…åŒè°ç¨é¡ºè¯´ç¡•çƒä¸é¥²è€¸æ€‚é¢‚è®¼è¯µæ“è‹è¯‰è‚ƒè™½ç»¥å²å­™æŸç¬‹ç¼©çé”ç­æŒæŠ¬æ‘Šè´ªç˜«æ»©å›è°­è°ˆå¹æ±¤çƒ«æ¶›ç»¦è…¾èªŠé”‘é¢˜ä½“å±‰æ¡è´´é“å…å¬çƒƒé“œç»Ÿå¤´å›¾æ¶‚å›¢é¢“èœ•è„±é¸µé©®é©¼æ¤­æ´¼è¢œå¼¯æ¹¾é¡½ä¸‡ç½‘éŸ¦è¿å›´ä¸ºæ½ç»´è‹‡ä¼Ÿä¼ªçº¬è°“å«æ¸©é—»çº¹ç¨³é—®ç“®æŒèœ—æ¶¡çªå‘œé’¨ä¹Œè¯¬æ— èŠœå´åé›¾åŠ¡è¯¯é”¡ç‰ºè¢­ä¹ é“£æˆç»†è™¾è¾–å³¡ä¾ ç‹­å¦é”¨é²œçº¤å’¸è´¤è¡”é—²æ˜¾é™©ç°çŒ®å¿é¦…ç¾¡å®ªçº¿å¢é•¶ä¹¡è¯¦å“é¡¹è§é”€æ™“å•¸èåæŒŸæºèƒè°å†™æ³»è°¢é”Œè¡…å…´æ±¹é”ˆç»£è™šå˜˜é¡»è®¸ç»ªç»­è½©æ‚¬é€‰ç™£ç»šå­¦å‹‹è¯¢å¯»é©¯è®­è®¯é€Šå‹é¸¦é¸­å“‘äºšè®¶é˜‰çƒŸç›ä¸¥é¢œé˜è‰³åŒç šå½¦è°šéªŒé¸¯æ¨æ‰¬ç–¡é˜³ç—’å…»æ ·ç‘¶æ‘‡å°§é¥çª‘è°£è¯çˆ·é¡µä¸šå¶åŒ»é“±é¢é—ä»ªå½èšè‰ºäº¿å¿†ä¹‰è¯£è®®è°Šè¯‘å¼‚ç»è«é˜´é“¶é¥®æ¨±å©´é¹°åº”ç¼¨è¹è¤è¥è§è‡é¢–å“Ÿæ‹¥ä½£ç—ˆè¸Šå’æ¶Œä¼˜å¿§é‚®é“€çŠ¹æ¸¸è¯±èˆ†é±¼æ¸”å¨±ä¸å±¿è¯­åå¾¡ç‹±èª‰é¢„é©­é¸³æ¸Šè¾•å›­å‘˜åœ†ç¼˜è¿œæ„¿çº¦è·ƒé’¥å²³ç²¤æ‚¦é˜…äº‘éƒ§åŒ€é™¨è¿è•´é…æ™•éŸµæ‚ç¾è½½æ”’æš‚èµèµƒè„å‡¿æ£ç¶è´£æ‹©åˆ™æ³½è´¼èµ æ‰æœ­è½§é“¡é—¸è¯ˆæ–‹å€ºæ¯¡ç›æ–©è¾—å´­æ ˆæˆ˜ç»½å¼ æ¶¨å¸è´¦èƒ€èµµè›°è¾™é”—è¿™è´é’ˆä¾¦è¯Šé•‡é˜µæŒ£çç‹°å¸§éƒ‘è¯ç»‡èŒæ‰§çº¸æŒšæ·å¸œè´¨é’Ÿç»ˆç§è‚¿ä¼—è¯Œè½´çš±æ˜¼éª¤çŒªè¯¸è¯›çƒ›ç©å˜±è´®é“¸ç­‘é©»ä¸“ç –è½¬èµšæ¡©åº„è£…å¦†å£®çŠ¶é”¥èµ˜å ç¼€è°†æµŠå…¹èµ„æ¸è¸ªç»¼æ€»çºµé‚¹è¯…ç»„é’»è‡´é’Ÿä¹ˆä¸ºåªå‡¶å‡†å¯æ¿é‡Œé›³ä½™é“¾æ³„';
}

function hi() {
    return 'çššè—¹ç¤™æ„›ç¿ºè¥–å¥§å£©ç½·æ“ºæ•—é ’è¾¦çµ†å¹«ç¶éŠè¬—å‰é£½å¯¶å ±é®‘è¼©è²é‹‡ç‹½å‚™æ†Šç¹ƒç­†ç•¢æ–ƒé–‰é‚Šç·¨è²¶è®Šè¾¯è¾®é¼ˆç™Ÿç€•æ¿±è³“æ“¯é¤…æ’¥ç¼½é‰‘é§è””è£œåƒè ¶æ®˜æ…šæ…˜ç‡¦è’¼è‰™å€‰æ»„å»å´å†Šæ¸¬å±¤è©«æ”™æ‘»èŸ¬é¥è®’çºéŸç”£é—¡é¡«å ´å˜—é•·å„Ÿè…¸å» æš¢éˆ”è»Šå¾¹å¡µé™³è¥¯æ’ç¨±æ‡²èª é¨ç™¡é²é¦³æ¥é½’ç†¾æ²–èŸ²å¯µç–‡èºŠç±Œç¶¢é†œæ«¥å»šé‹¤é››ç¤å„²è§¸è™•å‚³ç˜¡é—–å‰µéŒ˜ç´”ç¶½è¾­è©è³œè°è”¥å›ªå¾å¢æ¹Šç«„éŒ¯é”å¸¶è²¸æ“”å–®é„²æ’£è†½æ†šèª•å½ˆç•¶æ“‹é»¨è•©æª”æ—å³¶ç¦±å°ç›œç‡ˆé„§æ•µæ»Œéç· é»å¢Šé›»æ¾±é‡£èª¿å è«œç–Šé‡˜é ‚éŒ è¨‚æ±å‹•æ£Ÿå‡é¬¥çŠ¢ç¨è®€è³­éé›æ–·ç·å…ŒéšŠå°å™¸é “éˆå¥ªéµé¡è¨›æƒ¡é¤“å…’çˆ¾é¤Œè²³ç™¼ç½°é–¥çºç¤¬é‡©ç…©ç¯„è²©é£¯è¨ªç´¡é£›å»¢è²»ç´›å¢³å¥®æ†¤ç³è±æ¥“é‹’é¢¨ç˜‹é¦®ç¸«è«·é³³è†šè¼»æ’«è¼”è³¦è¤‡è² è¨ƒå©¦ç¸›è©²éˆ£è“‹å¹¹è¶•ç¨ˆè´›å²¡å‰›é‹¼ç¶±å´—è‡¯é¬æ“±é´¿é–£é‰»å€‹çµ¦é¾”å®®éè²¢éˆæºæ§‹è³¼å¤ è ±é¡§å‰®é—œè§€é¤¨æ…£è²«å»£è¦çŸ½æ­¸é¾œé–¨è»Œè©­æ«ƒè²´åŠŠè¼¥æ»¾é‹åœ‹éé§­éŸ“æ¼¢é–¡é¶´è³€æ©«è½Ÿé´»ç´…å¾Œå£ºè­·æ»¬æˆ¶å˜©è¯ç•«åŠƒè©±æ‡·å£æ­¡ç’°é‚„ç·©æ›å–šç˜“ç…¥æ¸™é»ƒè¬Šæ®è¼æ¯€è³„ç©¢æœƒç‡´å½™è«±èª¨ç¹ªè‘·æ¸¾å¤¥ç²è²¨ç¦æ“Šæ©Ÿç©é¥‘è­é›ç¸¾ç·æ¥µè¼¯ç´šæ“ å¹¾è–ŠåŠ‘æ¿Ÿè¨ˆè¨˜éš›ç¹¼ç´€å¤¾è¢é °è³ˆé‰€åƒ¹é§•æ®²ç›£å …ç®‹é–“è‰±ç·˜ç¹­æª¢å ¿é¹¼æ€æ’¿ç°¡å„‰æ¸›è–¦æª»é‘’è¸è³¤è¦‹éµè‰¦åŠé¤æ¼¸æ¿ºæ¾—æ¼¿è”£æ§³çè¬›é†¬è† æ¾†é©•å¬Œæ”ªé‰¸çŸ¯åƒ¥è…³é¤ƒç¹³çµè½è¼ƒç¨­éšç¯€è–é©šç¶“é ¸éœé¡å¾‘ç—™ç«¶æ·¨ç³¾å»„èˆŠé§’èˆ‰æ“šé‹¸æ‡¼åŠ‡éµ‘çµ¹å‚‘æ½”çµèª¡å±†ç·ŠéŒ¦åƒ…è¬¹é€²æ™‰ç‡¼ç›¡å‹èŠè¦ºæ±ºè¨£çµ•éˆè»é§¿é–‹å‡±é¡†æ®¼èª²å¢¾æ‡‡æ‘³åº«è¤²èª‡å¡Šå„ˆå¯¬ç¤¦æ› æ³è™§å·‹çªºé¥‹æ½°æ“´é—Šè Ÿè‡˜èŠä¾†è³´è—æ¬„æ””ç±ƒé—Œè˜­ç€¾è®•æ”¬è¦½æ‡¶çºœçˆ›æ¿«æ’ˆå‹æ¾‡æ¨‚é³å£˜é¡æ·šç±¬é›¢è£é¯‰ç¦®éº—å²å‹µç¤«æ›†ç€éš¸å€†è¯è“®é€£é®æ†æ¼£ç°¾æ–‚è‡‰éˆæˆ€ç…‰ç·´ç³§æ¶¼å…©è¼›è«’ç™‚é¼éçµè‡¨é„°é±—å‡œè³ƒé½¡éˆ´æ·©éˆå¶ºé ˜é¤¾åŠ‰é¾è¾åš¨ç± å£Ÿæ”éš´æ¨“å©æ‘Ÿç°è˜†ç›§é¡±å»¬çˆæ“„é¹µè™œé­¯è³‚ç¥¿éŒ„é™¸é©¢å‘‚é‹ä¾¶å±¢ç¸·æ…®æ¿¾ç¶ å·’æ”£å­¿ç¤äº‚æ„è¼ªå€«ä¾–æ·ªç¶¸è«–è˜¿ç¾…é‚é‘¼ç±®é¨¾é§±çµ¡åª½ç‘ªç¢¼èé¦¬ç½µå—è²·éº¥è³£é‚è„ˆçé¥…è »æ»¿è¬¾è²“éŒ¨é‰šè²¿éº½é»´æ²’é‚é–€æ‚¶å€‘éŒ³å¤¢è¬å½Œè¦“ç¶¿ç·¬å»Ÿæ»…æ†«é–©é³´éŠ˜è¬¬è¬€ç•éˆ‰ç´é›£æ’“è…¦æƒ±é¬§é¤’è†©æ”†æ’šé‡€é³¥è¶é½§é‘·é³æª¸ç°ç”¯æ“°æ¿˜éˆ•ç´è†¿æ¿ƒè¾²ç˜§è«¾æ­é·—æ¯†å˜”æ¼šç›¤é¾åœ‹æ„›è³ å™´éµ¬é¨™é£„é »è²§è˜‹æ†‘è©•æ½‘é —æ’²é‹ªæ¨¸è­œè‡é½Šé¨è±ˆå•“æ°£æ£„è¨–ç‰½æ‰¡é‡ºé‰›é·ç°½è¬™éŒ¢é‰—æ½›æ·ºè­´å¡¹æ§å—†ç‰†è–”å¼·æ¶é¬æ©‹å–¬åƒ‘ç¿¹ç«…ç«Šæ¬½è¦ªè¼•æ°«å‚¾é ƒè«‹æ…¶ç“Šçª®è¶¨å€è»€é©…é½²é¡´æ¬Šå‹¸å»éµ²è®“é¥’æ“¾ç¹ç†±éŸŒèªç´‰æ¦®çµ¨è»ŸéŠ³é–æ½¤ç‘è–©é°“è³½å‚˜å–ªé¨·æƒæ¾€æ®ºç´—ç¯©æ›¬é–ƒé™è´ç¹•å‚·è³ç‡’ç´¹è³’æ”æ‡¾è¨­ç´³å¯©å¬¸è…æ»²è²ç¹©å‹è–å¸«ç…æ¿•è©©å±æ™‚è•å¯¦è­˜é§›å‹¢é‡‹é£¾è¦–è©¦å£½ç¸æ¨è¼¸æ›¸è´–å±¬è¡“æ¨¹è±æ•¸å¸¥é›™èª°ç¨…é †èªªç¢©çˆçµ²é£¼è³æ…«é Œè¨Ÿèª¦æ“»è˜‡è¨´è‚…é›–ç¶æ­²å­«æç­ç¸®ç‘£é–çºæ’»æ“¡æ”¤è²ªç™±ç˜å£‡è­šè«‡æ­æ¹¯ç‡™æ¿¤ç¸§é¨°è¬„éŠ»é¡Œé«”å±œæ¢è²¼éµå»³è½çƒ´éŠ…çµ±é ­åœ–å¡—åœ˜é ¹è›»è„«é´•é¦±é§æ©¢çªªè¥ªå½ç£é ‘è¬ç¶²éŸ‹é•åœçˆ²æ¿°ç¶­è‘¦å‰åƒç·¯è¬‚è¡›æº«èç´‹ç©©å•ç”•æ’¾è¸æ¸¦çª©å—šé¢çƒèª£ç„¡è•ªå³å¡¢éœ§å‹™èª¤éŒ«çŠ§è¥²ç¿’éŠ‘æˆ²ç´°è¦è½„å³½ä¿ ç‹¹å»ˆéé®®çº–é¹¹è³¢éŠœé–‘é¡¯éšªç¾ç»ç¸£é¤¡ç¾¨æ†²ç·šå»‚é‘²é„‰è©³éŸ¿é …è•­éŠ·æ›‰å˜¯è å”æŒ¾æ”œè„…è«§å¯«ç€‰è¬é‹…é‡èˆˆæ´¶é½ç¹¡è™›å™“é ˆè¨±ç·’çºŒè»’æ‡¸é¸ç™¬çµ¢å­¸å‹³è©¢å°‹é¦´è¨“è¨Šéœå£“é´‰é´¨å•äºè¨é–¹ç…™é¹½åš´é¡”é–»è±”å­ç¡¯å½¥è«ºé©—é´¦æ¥Šæšç˜é™½ç™¢é¤Šæ¨£ç‘¤æ–å ¯é™çª¯è¬ è—¥çˆºé æ¥­è‘‰é†«éŠ¥é ¤éºå„€å½œèŸ»è—å„„æ†¶ç¾©è©£è­°èª¼è­¯ç•°ç¹¹è”­é™°éŠ€é£²æ«»å¬°é·¹æ‡‰çº“ç‘©è¢ç‡Ÿç†’è …ç©å–²æ“å‚­ç™°è¸´è© æ¹§å„ªæ†‚éƒµéˆ¾çŒ¶éŠèª˜è¼¿é­šæ¼å¨›èˆ‡å¶¼èªç±²ç¦¦ç„è­½é é¦­é´›æ·µè½…åœ’å“¡åœ“ç·£é é¡˜ç´„èºé‘°å¶½ç²µæ‚…é–±é›²é„–å‹»éš•é‹è˜Šé†æšˆéŸ»é›œç½è¼‰æ”¢æš«è´Šè´“é«’é‘¿æ£—ç«ˆè²¬æ“‡å‰‡æ¾¤è³Šè´ˆç´®åŠ„è»‹é˜é–˜è©é½‹å‚µæ°ˆç›æ–¬è¼¾å¶„æ£§æˆ°ç¶»å¼µæ¼²å¸³è³¬è„¹è¶™èŸ„è½éºé€™è²é‡åµè¨ºé®é™£æ™çœçŒ™å¹€é„­è­‰ç¹”è·åŸ·ç´™æ‘¯æ“²å¹Ÿè³ªé¾çµ‚ç¨®è…«è¡†è¬…è»¸çšºæ™é©Ÿè±¬è«¸èª…ç‡­çŸšå›‘è²¯é‘„ç¯‰é§å°ˆç£šè½‰è³ºæ¨èŠè£å¦å£¯ç‹€éŒè´…å¢œç¶´è«„æ¿èŒ²è³‡æ¼¬è¹¤ç¶œç¸½ç¸±é„’è©›çµ„é‘½ç·»é˜éº¼ç‚ºéš»å…‡æº–å•Ÿé—†è£¡é‚é¤˜éŠæ´©';
}

function ii(m, n) {
    if (n == '') {
        return 'è¿è¥å•†ï¼š' + m + '\n\n' + 'æ•°æ®ä¸­å¿ƒï¼šæœªçŸ¥';
    } else if (m == n) {
        return 'è¿è¥å•†åŒæ•°æ®ä¸­å¿ƒï¼š' + m;
    } else {
    	return 'è¿è¥å•†ï¼š' + m + '\n\n' + 'æ•°æ®ä¸­å¿ƒï¼š' + n;
    }
}

function ji(m) {
  if (m.includes("ä¸­å›½")) {
    return m.replace("ä¸­å›½", "");
  } else {
    return m;
  }
}

function ki(s) {
    if (s > 0) {
        return 'åŒ—çº¬ï¼š' + s + 'Â°';
    } else {
        return 'å—çº¬ï¼š' + Math.abs(s)+ 'Â°';
    }
}

function li(s) {
    if (s > 0) {
        return 'ä¸œç»ï¼š' + s + 'Â°';
    } else {
        return 'è¥¿ç»ï¼š' + Math.abs(s)+ 'Â°';
    }
}

let data, ke = true,
    re = false;

(async () => {
    try {
        try {
            let e = $persistentStore.read("svrckKey"),
                t = $environment;
            data = e ? JSON.parse(e) : prfl;
            if (typeof data.hideIP !== "boolean" || typeof data.icons !== "string" || typeof data.icolor !== "string" || typeof data.dptrTmot !== "number" || typeof data.arvlTmot !== "number") {
                console.log("æ— æ•°æ®æˆ–æ•°æ®é”™è¯¯æˆ–æ›´æ–°ï¼Œæ¢å¤é»˜è®¤");
                re = true;
                data = prfl
            }
        } catch (e) {
            console.log("æ— æ•°æ®æˆ–æ•°æ®é”™è¯¯æˆ–æ›´æ–°ï¼Œæ¢å¤é»˜è®¤");
            data = prfl;
            re = true
        }
        re && $persistentStore.write(JSON.stringify(prfl, "", 2), "svrckKey");
        
        let t = data.icons,
            o = data.icolor,
            i = data.hideIP,
            n = data.dptrTmot,
            s = data.arvlTmot;
        let a = "",
            u = "",
            p = "",
            f = "";
        
        const x = await tKey(`https://api-v3.speedtest.cn/ip`, n);
        if (x.code === 0) {
            let {
                province: t,
                isp: o,
                city: n,
                district: s,
                ip: u,
                lat: w,
                lon: y
            } = x.data, a = x.tk;
            //console.log("ik" + JSON.stringify(mi, null, 2));
            i && (u = mi(u));
            z = "_______________________________\n" + "\n                    ğŸ” ç»“æœ ğŸ‘‡\n" + "\n             -------------------\n" + "\n                      å…¥ç½‘ä¿¡æ¯" + "\n                      ---------\n" + "\nå½’å±åœ°ï¼š" + di(t,n) + " " + s + "\n\nIPï¼š" + u + "   " + a + "ms\n" + "\n                   è¿è¥å•†ï¼š" + ji(o) + "\n\n" + "åŒ—çº¬ï¼š" + w + 'Â°' + "   " + "ä¸œç»ï¼š" + y + 'Â°' + "\n\n   -------------------------------\n"
        } else {
            //console.log("ik" + JSON.stringify(e));
            z = "å…¥ç½‘æŸ¥è¯¢å¤±è´¥"
            }
                            
        const g = await tKey("http://ip-api.com/json/?lang=zh-CN", s);
        if (g.status === "success" && ke) {
            console.log("ipapi" + JSON.stringify(g, null, 2));
            let {
                country: e,
                countryCode: t,
                regionName: o,
                query: n,
                city: s,
                org: r,
                isp: l,
                as: c,
                lat: w,
                lon: y,
                tk: p
            } = g;
            a = n;
            i && (n = mi(n));
            var arvltt = "\n                      è½åœ°åˆ†æ" + "\n                      ---------\n";
                arvled = "\n\n_______________________________"
                d = di(ei(fi(e)), bi(fi(o), fi(s))) + " âŸ âŸ¦" + ai(t) + "âŸ§";
                u = arvltt + "\nå½’å±åœ°ï¼š" + d + "\n\nIPï¼š" + n + "   " + p + "ms\n\n" + ii(l,r) + "\n\n" + ci(c) + "\n\n" + ki(w) + "   " + li(y) + arvled
        } else {
            u = arvltt + "\n                          æŠ±æ­‰\n" + "\n          æ— æ³•è·å–èŠ‚ç‚¹ç›¸å…³ä¿¡æ¯" + arvled
        }

        const m = await httpAPI();
        let y, P = "";
        const h = m.requests.slice(0, 6);
        let w = h.filter((e => /ip-api\.com/.test(e.URL)));
        if (w.length > 0 && ke) {
            const e = w[0];
            f = e.policyName;
            y = e.remoteAddress.replace(" (Proxy)", "");
        } else {
            y = "Noip"
        }
            
        let k = false,
            v4 = false,
            v6 = false,
            cn = true;
            
        if (y === "Noip") {
            k = true
        } else if (/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(y)) {
            v4 = true
        } else if (/^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/.test(y)) {
            v6 = true
        }
        
        if (y == a) {
            cn = false;
            p = "\n                    -----------" + "\n                    ç±»å‹ï¼šç›´è¿" + "\n                    -----------\n"
        } else {
            if (!k || v4) {
                const e = await tKey(`https://api-v3.speedtest.cn/ip?ip=${y}`, n);
                if (e.code === 0 && e.data.countryCode === "CN") {
                    let {
                        province: t,
                        isp: o,
                        city: n,
                        district: s,
                        lat: w,
                        lon: z
                    } = e.data, a = e.tk;
                    //console.log("ik" + JSON.stringify(e, null, 2));
                    i && (y = mi(y));
                    p = "\n             -------------------" + "\n             ç±»å‹ï¼šå›½å†…ğŸ‡¨ğŸ‡³ä¸­è½¬" + "\n             -------------------\n" + "\n                      å…¥å£åˆ†æ" + "\n                      ---------\n" + "\nå½’å±åœ°ï¼š" + di(t,n) + " " + s + "\n\nIPï¼š" + y + "   " + a + "ms\n" + "\n                   è¿è¥å•†ï¼š" + ji(o) + "\n\n" + "åŒ—çº¬ï¼š" + w + 'Â°' + "   " + "ä¸œç»ï¼š" + z + 'Â°' + "\n\n   -------------------------------\n"
                } else {
                    cn = false;
                    //console.log("ik" + JSON.stringify(e));
                    p = "å…¥å£æŸ¥è¯¢å¤±è´¥"
                }
            }

            if ((!k || v6) && !cn) {
                const e = await tKey(`http://ip-api.com/json/${y}?lang=zh-CN`, s);
                if (e.status === "success") {
                    //console.log("iai" + JSON.stringify(e, null, 2));
                    let {
                        countryCode: t,
                        country: o,
                        regionName: u,
                        city: n,
                        org: v,
                        lat: b,
                        lon: z,
                        as: w,
                        tk: s,
                        isp: a
                    } = e;
                    i && (y = mi(y));
                    let r = di(ei(fi(o)), bi(fi(u), fi(n))) + " âŸ âŸ¦" + ai(t) + "âŸ§";
                    p = "\n                ----------------" + "\n                ç±»å‹ï¼šå›½å¤–ä¸­è½¬" + "\n                ----------------\n" + "\n                      å…¥å£åˆ†æ" + "\n                      ---------\n" + "\nå½’å±åœ°ï¼š" + r + "\n\nIPï¼š" + y + "   " + s + "ms\n\n" + ii(a,v) + "\n\n" + ci(w) + "\n\n" + ki(b) + "   " + li(z) + "\n\n   -------------------------------\n"
                } else {
                    //console.log("iai" + JSON.stringify(e));
                    p = "æŠ±æ­‰å…¥å£æŸ¥è¯¢å¤±è´¥\n"
                }
            }
        }
        $done({
            title: "èŠ‚ç‚¹ä¿¡æ¯æŸ¥è¯¢" + " âŸ " + f,
            content: z + p + u,
            icon: t,
            "icon-color": o
        })
    } catch (e) {
        //console.log(e.message);
        $done({
            title: "èŠ‚ç‚¹ä¿¡æ¯æŸ¥è¯¢" + " âŸ " + f,
            content: "\næŸ¥è¯¢å¤±è´¥ï¼Œè¯·é‡è¯•âš ï¸",
            icon: icons,
            "icon-color": icolor
        })
    }
})(),


function mi(e) {
    return e.replace(/(\w{1,4})(\.|\:)(\w{1,4})$/, ((e, t, o, i) => `${"âˆ—".repeat(t.length)}.${"âˆ—".repeat(i.length)}`))
}

async function httpAPI(e = "/v1/requests/recent", t = "GET", o = null) {
    return new Promise(((i, n) => {
        $httpAPI(t, e, o, (e => {
            i(e)
        }))
    }))
}

async function tKey(e, t) {
    let o = 1,
        i = 1;
    const s = new Promise(((s, a) => {
        const r = async l => {
            try {
                const o = await Promise.race([new Promise(((t, o) => {
                    let i = Date.now();
                    $httpClient.get({
                        url: e
                    }, ((e, n, s) => {
                        if (e) {
                            o(e)
                        } else {
                            let e = Date.now() - i;
                            let o = n.status;
                            switch (o) {
                                case 200:
                                    let o = n.headers["Content-Type"];
                                    switch (true) {
                                        case o.includes("application/json"):
                                            let i = JSON.parse(s);
                                            i.tk = e;
                                            t(i);
                                            break;
                                        case o.includes("text/html"):
                                            t("text/html");
                                            break;
                                        case o.includes("text/plain"):
                                            let n = s.split("\n");
                                            let a = n.reduce(((t, o) => {
                                                let [i, n] = o.split("=");
                                                t[i] = n;
                                                t.tk = e;
                                                return t
                                            }), {});
                                            t(a);
                                            break;
                                        case o.includes("image/svg+xml"):
                                            t("image/svg+xml");
                                            break;
                                        default:
                                            t("æœªçŸ¥");
                                            break
                                    }
                                    break;
                                case 204:
                                    let i = {
                                        tk: e
                                    };
                                    t(i);
                                    break;
                                case 429:
                                    console.log("æ¬¡æ•°è¿‡å¤š");
                                    t("æ¬¡æ•°è¿‡å¤š");
                                    break;
                                case 404:
                                    console.log("404");
                                    t("404");
                                    break;
                                default:
                                    t("nokey");
                                    break
                            }
                        }
                    }))
                })), new Promise(((e, o) => {
                    setTimeout((() => o(new Error("timeout"))), t)
                }))]);
                if (o) {
                    s(o)
                } else {
                    s("è¶…æ—¶");
                    a(new Error(n.message))
                }
            } catch (e) {
                if (l < o) {
                    i++;
                    r(l + 1)
                } else {
                    s("æ£€æµ‹å¤±è´¥, é‡è¯•æ¬¡æ•°" + i);
                    a(e)
                }
            }
        };
        r(0)
    }));
    return s
}

servicecheck-lite.js
/*
è„šæœ¬å‚è€ƒ @Helge_0x00 
ä¿®æ”¹æ—¥æœŸï¼š23.10.09

æ”¯æŒä½¿ç”¨è„šæœ¬ä½¿ç”¨ argument å‚æ•°è‡ªå®šä¹‰é…ç½®ï¼Œå¦‚ï¼šargument=title=è§£é”æ£€æµ‹&icon=headphones.circle&color=#FF2121ï¼Œå…·ä½“å‚æ•°å¦‚ä¸‹æ‰€ç¤ºï¼Œ
 * title: é¢æ¿æ ‡é¢˜
 * icon: SFSymbols å›¾æ ‡
 * colorï¼šå›¾æ ‡é¢œè‰²
*/

function a(m) {
    return String['fromCodePoint'](...m['toUpperCase']()['split']('')['map'](m => 0x1f1a5 + m['charCodeAt']()));
}

let args = getArgs();

const REQUEST_HEADERS = {
  'User-Agent':
    'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.61 Safari/537.36',
  'Accept-Language': 'en',
}

// å³å°†ç™»é™†
const STATUS_COMING = 2
// æ”¯æŒè§£é”
const STATUS_AVAILABLE = 1
// ä¸æ”¯æŒè§£é”
const STATUS_NOT_AVAILABLE = 0
// æ£€æµ‹è¶…æ—¶
const STATUS_TIMEOUT = -1
// æ£€æµ‹å¼‚å¸¸
const STATUS_ERROR = -2

const UA = 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.61 Safari/537.36';

(async () => {
  let now = new Date();
  let hour = now.getHours();
  let minutes = now.getMinutes();
  hour = hour > 9 ? hour : "0" + hour;
  minutes = minutes > 9 ? minutes : "0" + minutes;
  let panel_result = {
    title: `${args.title} | ${hour}:${minutes}` || `æµåª’ä½“è§£é”æŸ¥è¯¢ | ${hour}:${minutes}`,
    content: '',
    icon: args.icon || "play.circle",
    "icon-color": args.color || "#007aff",
  }
	
  let [{ region, status }] = await Promise.all([testDisneyPlus()])
  await Promise.all([check_youtube_premium(), check_netflix()])
    .then((result) => {
      console.log(result)
      let disney_result = ""
      if (status == STATUS_COMING) {
        //console.log(1)
        disney_result = "Dâº: å³å°†ç™»é™†~" + a(region.toUpperCase()) + ' |'
      } else if (status == STATUS_AVAILABLE) {
        //console.log(2)
        console.log(region)
        disney_result = "Dâº: " + a(region.toUpperCase()) + ' |'
        // console.log(result["Disney"])
      } else if (status == STATUS_NOT_AVAILABLE) {
        //console.log(3)
        disney_result = "Dâº: \u2612" + ' |'
      } else if (status == STATUS_TIMEOUT) {
        disney_result = "Dâº: âŒ›ï¸" + ' |'
      }
      result.push(disney_result)
      console.log(result)
      let content = result.join(' ')
      console.log(content)

      panel_result['content'] = content + gptcheck
    })
    .finally(() => {
      $done(panel_result)
    })
})()

function getArgs() {
  return Object.fromEntries(
    $argument
      .split("&")
      .map((item) => item.split("="))
      .map(([k, v]) => [k, decodeURIComponent(v)])
  );
}

async function check_youtube_premium() {
  let inner_check = () => {
    return new Promise((resolve, reject) => {
      let option = {
        url: 'https://www.youtube.com/premium',
        headers: REQUEST_HEADERS,
      }
      $httpClient.get(option, function (error, response, data) {
        if (error != null || response.status !== 200) {
          reject('Error')
          return
        }

        if (data.indexOf('Premium is not available in your country') !== -1) {
          resolve('Not Available')
          return
        }

        let region = ''
        let re = new RegExp('"countryCode":"(.*?)"', 'gm')
        let result = re.exec(data)
        if (result != null && result.length === 2) {
          region = result[1]
        } else if (data.indexOf('www.google.cn') !== -1) {
          region = 'CN'
        } else {
          region = 'US'
        }
        resolve(region)
      })
    })
  }

  let youtube_check_result = 'ğŸ“º: '

  await inner_check()
    .then((code) => {
      if (code === 'Not Available') {
        youtube_check_result += '\u2612 |'
      } else {
        youtube_check_result += a(code.toUpperCase()) + ' |'
      }
    })
    .catch((error) => {
      youtube_check_result += 'âŒ›ï¸ |'
    })

  return youtube_check_result
}

async function check_netflix() {
  let inner_check = (filmId) => {
    return new Promise((resolve, reject) => {
      let option = {
        url: 'https://www.netflix.com/title/' + filmId,
        headers: REQUEST_HEADERS,
      }
      $httpClient.get(option, function (error, response, data) {
        if (error != null) {
          reject('Error')
          return
        }

        if (response.status === 403) {
          reject('Not Available')
          return
        }

        if (response.status === 404) {
          resolve('Not Found')
          return
        }

        if (response.status === 200) {
          let url = response.headers['x-originating-url']
          let region = url.split('/')[3]
          region = region.split('-')[0]
          if (region == 'title') {
            region = 'US'
          }
          resolve(region)
          return
        }

        reject('Error')
      })
    })
  }

  let netflix_check_result = 'NF: '

  await inner_check(80062035)
    .then((code) => {
      if (code === 'Not Found') {
        return inner_check(80018499)
      }
      netflix_check_result += a(code.toUpperCase()) + ' |'
      return Promise.reject('BreakSignal')
    })
    .then((code) => {
      if (code === 'Not Found') {
        return Promise.reject('Not Available')
      }

      netflix_check_result += 'âš ' + a(code.toUpperCase()) + ' |'
      return Promise.reject('BreakSignal')
    })
    .catch((error) => {
      if (error === 'BreakSignal') {
        return
      }
      if (error === 'Not Available') {
        netflix_check_result += '\u2612 |'
        return
      }
      netflix_check_result += 'âŒ›ï¸ |'
    })

  return netflix_check_result
}

async function testDisneyPlus() {
  try {
    let { region, cnbl } = await Promise.race([testHomePage(), timeout(7000)])
    console.log(`homepage: region=${region}, cnbl=${cnbl}`)
    // å³å°†ç™»é™†
    //  if (cnbl == 2) {
    //    return { region, status: STATUS_COMING }
    //  }
    let { countryCode, inSupportedLocation } = await Promise.race([getLocationInfo(), timeout(7000)])
    console.log(`getLocationInfo: countryCode=${countryCode}, inSupportedLocation=${inSupportedLocation}`)

    region = countryCode ?? region
    console.log("region:" + region)
    // å³å°†ç™»é™†
    if (inSupportedLocation === false || inSupportedLocation === 'false') {
      return { region, status: STATUS_COMING }
    } else {
      // æ”¯æŒè§£é”
      return { region, status: STATUS_AVAILABLE }
    }

  } catch (error) {
    console.log("error:" + error)

    // ä¸æ”¯æŒè§£é”
    if (error === 'Not Available') {
      console.log("ä¸æ”¯æŒ")
      return { status: STATUS_NOT_AVAILABLE }
    }

    // æ£€æµ‹è¶…æ—¶
    if (error === 'Timeout') {
      return { status: STATUS_TIMEOUT }
    }

    return { status: STATUS_ERROR }
  }
}

function getLocationInfo() {
  return new Promise((resolve, reject) => {
    let opts = {
      url: 'https://disney.api.edge.bamgrid.com/graph/v1/device/graphql',
      headers: {
        'Accept-Language': 'en',
        Authorization: 'ZGlzbmV5JmJyb3dzZXImMS4wLjA.Cu56AgSfBTDag5NiRA81oLHkDZfu5L3CKadnefEAY84',
        'Content-Type': 'application/json',
        'User-Agent': UA,
      },
      body: JSON.stringify({
        query: 'mutation registerDevice($input: RegisterDeviceInput!) { registerDevice(registerDevice: $input) { grant { grantType assertion } } }',
        variables: {
          input: {
            applicationRuntime: 'chrome',
            attributes: {
              browserName: 'chrome',
              browserVersion: '94.0.4606',
              manufacturer: 'apple',
              model: null,
              operatingSystem: 'macintosh',
              operatingSystemVersion: '10.15.7',
              osDeviceIds: [],
            },
            deviceFamily: 'browser',
            deviceLanguage: 'en',
            deviceProfile: 'macosx',
          },
        },
      }),
    }

    $httpClient.post(opts, function (error, response, data) {
      if (error) {
        reject('Error')
        return
      }

      if (response.status !== 200) {
        console.log('getLocationInfo: ' + data)
        reject('Not Available')
        return
      }

      data = JSON.parse(data)
      if (data?.errors) {
        console.log('getLocationInfo: ' + data)
        reject('Not Available')
        return
      }

      let {
        token: { accessToken },
        session: {
          inSupportedLocation,
          location: { countryCode },
        },
      } = data?.extensions?.sdk
      resolve({ inSupportedLocation, countryCode, accessToken })
    })
  })
}

function testHomePage() {
  return new Promise((resolve, reject) => {
    let opts = {
      url: 'https://www.disneyplus.com/',
      headers: {
        'Accept-Language': 'en',
        'User-Agent': UA,
      },
    }

    $httpClient.get(opts, function (error, response, data) {
      if (error) {
        reject('Error')
        return
      }
      if (response.status !== 200 || data.indexOf('Sorry, Disney+ is not available in your region.') !== -1) {
        reject('Not Available')
        return
      }

      let match = data.match(/Region: ([A-Za-z]{2})[\s\S]*?CNBL: ([12])/)
      if (!match) {
        resolve({ region: '', cnbl: '' })
        return
      }

      let region = match[1]
      let cnbl = match[2]
      resolve({ region, cnbl })
    })
  })
}

function timeout(delay = 5000) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      reject('Timeout')
    }, delay)
  })
}

let gptcheck = " GPT: ";
let url = "http://chat.openai.com/cdn-cgi/trace";
let tf = ["T1", "XX", "AL", "DZ", "AD", "AO", "AG", "AR", "AM", "AU", "AT", "AZ", "BS", "BD", "BB", "BE", "BZ", "BJ", "BT", "BA", "BW", "BR", "BG", "BF", "CV", "CA", "CL", "CO", "KM", "CR", "HR", "CY", "DK", "DJ", "DM", "DO", "EC", "SV", "EE", "FJ", "FI", "FR", "GA", "GM", "GE", "DE", "GH", "GR", "GD", "GT", "GN", "GW", "GY", "HT", "HN", "HU", "IS", "IN", "ID", "IQ", "IE", "IL", "IT", "JM", "JP", "JO", "KZ", "KE", "KI", "KW", "KG", "LV", "LB", "LS", "LR", "LI", "LT", "LU", "MG", "MW", "MY", "MV", "ML", "MT", "MH", "MR", "MU", "MX", "MC", "MN", "ME", "MA", "MZ", "MM", "NA", "NR", "NP", "NL", "NZ", "NI", "NE", "NG", "MK", "NO", "OM", "PK", "PW", "PA", "PG", "PE", "PH", "PL", "PT", "QA", "RO", "RW", "KN", "LC", "VC", "WS", "SM", "ST", "SN", "RS", "SC", "SL", "SG", "SK", "SI", "SB", "ZA", "ES", "LK", "SR", "SE", "CH", "TH", "TG", "TO", "TT", "TN", "TR", "TV", "UG", "AE", "US", "UY", "VU", "ZM", "BO", "BN", "CG", "CZ", "VA", "FM", "MD", "PS", "KR", "TW", "TZ", "TL", "GB"];
//let tff = ["plus", "on"];

// å‘é€ HTTP è¯·æ±‚è·å–æ‰€åœ¨åœ°ä¿¡æ¯
$httpClient.get(url, function(error, response, data) {
    if (data) {
        let lines = data.split("\n");
    let cf = lines.reduce((acc, line) => {
        let [key, value] = line.split("=");
        acc[key] = value;
        return acc;
        }, {});
    let loc = a(cf.loc);

    // åˆ¤æ–­ ChatGPT æ˜¯å¦æ”¯æŒè¯¥å›½å®¶/åœ°åŒº
    let l = tf.indexOf(cf.loc);
    let gpt;
    if (l !== -1) {
        return gptcheck += `${loc}`;
        } else {
        return gptcheck += "\u2612";
        }
    } else {
        return gptcheck += "âŒ›ï¸";
        }
})